---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /zk/
typora-root-url: ..\.vuepress\public
---



随着分布式应用的的不断深入，需要对集群管理逐步透明化监控集群和作业状态，可以充分利ZK的独有特性。

::: tip

使用 zk 实现 Master 选举的原理是，集群中所有主机都向 zk 中创建相同路径下的某持久节点注册子节点列表变更 watcher 监听，并在该节点下持久相同名称的临时节点，谁创建成功谁就是 Master。

当 Master 宕机，该临时节点消失，此时会触发其他主机 watcher 回调的执行。watcher回调会重新抢注该节点下的临时节点，谁注册成功谁就是 Master。即可以实现 Master 宕机后的自动重新选举。

:::

## 实现思路

1. 节点尝试创建主节点的临时节点
2. 创建成功,则为主节点
3. 创建失败,则启动对主节点的监听,并getdata主节点信息
4. 监听节点监听到主节点发生的下线情况,则重新进行选举









## 参考

[(30条消息) zk实现主从选举-java_利用zk实现选举_战神陈佩斯的博客-CSDN博客](https://blog.csdn.net/weixin_44504392/article/details/127084742)

