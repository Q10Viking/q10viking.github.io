---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /FileSystem/
typora-root-url: ..\.vuepress\public
---



## Path

[Path Operations (The Java™ Tutorials > Essential Java Classes > Basic I/O) (oracle.com)](https://docs.oracle.com/javase/tutorial/essential/io/pathOps.html)

### create path

::: tip

代表一个文件或者文件夹的路径

[Source Code PathsMain.java](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter02/PathsMain.java)

:::

```java
public class PathsMain {
    public static void main(String[] args) {
        String currentPathStr = System.getProperty("user.dir");
        System.out.println(currentPathStr);
        // create path  尽管这个路劲不存在，但是也不会报错
        Path logsPath = Paths.get(currentPathStr, "logs","foo.log");
        System.out.format("toString: %s%n", logsPath.toString());
        System.out.format("getFileName: %s%n", logsPath.getFileName());
        System.out.format("getName(0): %s%n", logsPath.getName(0));
        System.out.format("getNameCount: %d%n", logsPath.getNameCount());
        System.out.format("subpath(0,2): %s%n", logsPath.subpath(0,2));
        System.out.format("getParent: %s%n", logsPath.getParent());
        System.out.format("getRoot: %s%n", logsPath.getRoot());
        System.out.format("toUri: %s%n", logsPath.toUri());
    }
}
/**
 * D:\learncode\filesystem
 * toString: D:\learncode\filesystem\logs\foo.log
 * getFileName: foo.log
 * getName(0): learncode
 * getNameCount: 4
 * subpath(0,2): learncode\filesystem
 * getParent: D:\learncode\filesystem\logs
 * getRoot: D:\
 * toUri: file:///D:/learncode/filesystem/logs/foo.log
 */
```

### convert path

[Source Code ConvertPath.java](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter02/ConvertPath.java)

- 可以很方便将相对路径转换为绝对路径

```java
public class ConvertPath {
    public static void main(String[] args) throws IOException {

        // 设置相对路径，等价于 Paths.get("logs\\foo.log")
        Path logsPath = Paths.get("logs","foo.log");
        System.out.println(logsPath);
        System.out.println(logsPath.toAbsolutePath());
        System.out.println(logsPath.toUri());

        // 与toAbsolutePath不同的是，如果该路径不存在则会报错NoSuchFileException
        System.out.println(logsPath.toRealPath());
    }
}
/**
 * logs\foo.log
 * D:\learncode\filesystem\logs\foo.log
 * file:///D:/learncode/filesystem/logs/foo.log
 * Exception in thread "main" java.nio.file.NoSuchFileException: D:\learncode\filesystem\logs\foo.log
 */
```



### Join Two Path

::: tip

可以很方便将绝对路径拼接相对路径

[Source Code JoinTwoPath.java](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter02/JoinTwoPath.java)

:::

```java
public class JoinTwoPath {
    public static void main(String[] args) {
        Path path = Paths.get("D:\\learncode\\filesystem");
        // D:\learncode\filesystem\logs\foo.log
        System.out.format("%s %n",path.resolve("logs/foo.log"));
    }
}
```



### Creating a Path Between Two Paths

::: tip

两个路径之间的相对路径

[Source Code BetweenTwoPath.java](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter02/BetweenTwoPath.java)

:::

```java
public class BetweenTwoPath {
    public static void main(String[] args) {
        Path p1 = Paths.get("home");
        Path p3 = Paths.get("home/sally/bar");

        // 相对路径
        Path p1_to_p3 = p1.relativize(p3);  // sally\bar
        Path p3_to_p1 = p3.relativize(p1);  // ..\..
        Path p3_to_p3 = p3.relativize(p3);  // 为空

        System.out.format("%s%n %s%n %s%n",p1_to_p3,p3_to_p1,p3_to_p3);
    }
}
```



### Comparing Two Path

[Source Code ComparingTwoPath.java](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter02/ComparingTwoPath.java)

```java
public class ComparingTwoPath {
    public static void main(String[] args) {
        Path path = Paths.get("D:\\");
        Path otherPath = Paths.get("D:\\learncode\\filesystem\\logs\\foo.log");
        Path beginPath = Paths.get("C:\\");
        Path endPath = Paths.get("foo.log");

        if(path.equals(otherPath)){
            // equality logic here
            System.out.println("equal");
        }

        if(otherPath.startsWith(beginPath)){
            // path begins with "C:\"
            System.out.println("starts with " + beginPath);
        }

        if(otherPath.endsWith(endPath)){
            // path ends with "foo.log"
            System.out.println("end with " + endPath);
        }
    }
}
```



### iterator path name

::: tip

不包含root directory

[Source Code IteratorPathName.java](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter02/IteratorPathName.java)

:::

```java
public class IteratorPathName {
    public static void main(String[] args) {
        Path path = Paths.get("D:\\learncode\\filesystem\\logs\\foo.log");
        // The first element returned is that closest to the root in the directory tree.
        for (Path name: path){
            System.out.println(name);
        }
    }
}
/**
 * learncode
 * filesystem
 * logs
 * foo.log
 */
```





## File

在java nio中提供了Files工具类结合使用Path，对文件和文件夹进行操作。









## 文件系统

::: tip

Microsoft Windows supports multiple root nodes.

[Source Code](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter01/FileSystemDemo.java)

:::

```java
import java.io.IOException;
import java.nio.file.FileStore;
import java.nio.file.FileSystem;
import java.nio.file.FileSystems;

public class FileSystemDemo {
    public static void main(String[] args) throws IOException {
        FileSystem fileSystem = FileSystems.getDefault();

        fileSystem.getRootDirectories().forEach(System.out::println);

        for (FileStore store: fileSystem.getFileStores()) {
            long total = store.getTotalSpace() / 1024;
            long used = (store.getTotalSpace() - store.getUnallocatedSpace()) / 1024;
            long avail = store.getUsableSpace() / 1024;
            System.out.format("%-20s %12d %12d %12d%n", store, total, used, avail);
        }
    }
}
/**
 * C:\
 * D:\
 * E:\
 * F:\
 * G:\
 * H:\
 * Windows (C:)            123018236     99776024     23242212
 * DATA (D:)               828327932    819870516      8457416
 * Software (E:)           133943292     97342816     36600476
 * RECOVERY (F:)            14488572     12825860      1662712
 * GRMCULXFRER (G:)        976762452    803494568    173267884
 */
```

![image-20221009001834310](/images/filesystem/image-20221009001834310.png)

