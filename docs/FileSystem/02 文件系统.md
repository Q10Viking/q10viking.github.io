---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /FileSystem/
typora-root-url: ..\.vuepress\public
---



## Path

### create path

::: tip

代表一个文件或者文件夹的路径

[Source Code PathsMain.java](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter02/PathsMain.java)

:::

```java
public class PathsMain {
    public static void main(String[] args) {
        String currentPathStr = System.getProperty("user.dir");
        System.out.println(currentPathStr);
        // create path  尽管这个路劲不存在，但是也不会报错
        Path logsPath = Paths.get(currentPathStr, "logs","foo.log");
        System.out.format("toString: %s%n", logsPath.toString());
        System.out.format("getFileName: %s%n", logsPath.getFileName());
        System.out.format("getName(0): %s%n", logsPath.getName(0));
        System.out.format("getNameCount: %d%n", logsPath.getNameCount());
        System.out.format("subpath(0,2): %s%n", logsPath.subpath(0,2));
        System.out.format("getParent: %s%n", logsPath.getParent());
        System.out.format("getRoot: %s%n", logsPath.getRoot());
        System.out.format("toUri: %s%n", logsPath.toUri());
    }
}
/**
 * D:\learncode\filesystem
 * toString: D:\learncode\filesystem\logs\foo.log
 * getFileName: foo.log
 * getName(0): learncode
 * getNameCount: 4
 * subpath(0,2): learncode\filesystem
 * getParent: D:\learncode\filesystem\logs
 * getRoot: D:\
 * toUri: file:///D:/learncode/filesystem/logs/foo.log
 */
```

### convert path

[Source Code ConvertPath.java](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter02/ConvertPath.java)

- 可以很方便将相对路径转换为绝对路径

```java
public class ConvertPath {
    public static void main(String[] args) throws IOException {

        // 设置相对路径，等价于 Paths.get("logs\\foo.log")
        Path logsPath = Paths.get("logs","foo.log");
        System.out.println(logsPath);
        System.out.println(logsPath.toAbsolutePath());
        System.out.println(logsPath.toUri());

        // 与toAbsolutePath不同的是，如果该路径不存在则会报错NoSuchFileException
        System.out.println(logsPath.toRealPath());
    }
}
/**
 * logs\foo.log
 * D:\learncode\filesystem\logs\foo.log
 * file:///D:/learncode/filesystem/logs/foo.log
 * Exception in thread "main" java.nio.file.NoSuchFileException: D:\learncode\filesystem\logs\foo.log
 */
```





## 文件系统

::: tip

Microsoft Windows supports multiple root nodes.

[Source Code](https://github.com/Q10Viking/learncode/blob/main/filesystem/src/org/hzz/chapter01/FileSystemDemo.java)

:::

```java
import java.io.IOException;
import java.nio.file.FileStore;
import java.nio.file.FileSystem;
import java.nio.file.FileSystems;

public class FileSystemDemo {
    public static void main(String[] args) throws IOException {
        FileSystem fileSystem = FileSystems.getDefault();

        fileSystem.getRootDirectories().forEach(System.out::println);

        for (FileStore store: fileSystem.getFileStores()) {
            long total = store.getTotalSpace() / 1024;
            long used = (store.getTotalSpace() - store.getUnallocatedSpace()) / 1024;
            long avail = store.getUsableSpace() / 1024;
            System.out.format("%-20s %12d %12d %12d%n", store, total, used, avail);
        }
    }
}
/**
 * C:\
 * D:\
 * E:\
 * F:\
 * G:\
 * H:\
 * Windows (C:)            123018236     99776024     23242212
 * DATA (D:)               828327932    819870516      8457416
 * Software (E:)           133943292     97342816     36600476
 * RECOVERY (F:)            14488572     12825860      1662712
 * GRMCULXFRER (G:)        976762452    803494568    173267884
 */
```

![image-20221009001834310](/images/filesystem/image-20221009001834310.png)

