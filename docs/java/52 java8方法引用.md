---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /java/
typora-root-url: ..\.vuepress\public
---

## 1. 静态方法引用

### 1.1 一个参数的情况

```java
方法接口 Consumer很合适
(args) -> ClassName.staticMethodName(args)
ClassName::staticMethodName
```

```java
public class ObjectStaticMethodReference {
    public static void main(String[] args) {
        List<String> games = Arrays.asList("狼人杀", "王者荣耀", "穿越火线");
        games.forEach(SimplePrinter::print);

    }
}

class SimplePrinter{
    public static void print(String str){
        System.out.println(str);
    }
}
/**
狼人杀
王者荣耀
穿越火线
*/
```

----------



### 2.1 三个参数的情况

```java
方法接口BiFunction
(a,b) -> ClassName.staticMethodName(a,b)
ClassName::staticMethodName(a,b)
```

```java
public class ObjectStaticMethodRefenceV2 {
    public static void main(String[] args) {
        String r1 = playTwoArguments(1,2,(a,b)->IntegerUtils.join(a,b));
        String r2 = playTwoArguments(1,2,IntegerUtils::join);
        System.out.printf("r1 = %s \nr2 = %s \n",r1,r2);
    }

    private static <T> T playTwoArguments(Integer a, Integer b, BiFunction<Integer,Integer,T> func){
        return func.apply(a,b);
    }
}

abstract  class IntegerUtils{
    public static String join(Integer a,Integer b){
        return String.valueOf(a+b);
    }
}
```



----------



## 2. 对象实例的方法引用

```java
Object::instanceMethodName
```

```java
public class ObjectMethodReference {
    public static void main(String[] args) {
        List<Employ> employList = Arrays.asList(
                new Employ("橘右京", 38, BigDecimal.valueOf(3800)),
                new Employ("李白", 5, BigDecimal.valueOf(100)),
                new Employ("妲己", 25, BigDecimal.valueOf(2500)),
                new Employ("元歌", 99, BigDecimal.valueOf(9999))
        );
        ComparatorProvider provider = new ComparatorProvider();
        employList.sort(provider::compareBySalary);
        employList.forEach(System.out::println);
    }
}

class ComparatorProvider{
    public int compareByAge(Employ o1, Employ o2) {
        return o1.getAge().compareTo(o2.getAge());
    }

    public int compareByName(Employ o1, Employ o2) {
        return o1.getName().compareTo(o2.getName());
    }

    public int compareBySalary(Employ o1, Employ o2) {
        return o1.getAge().compareTo(o2.getAge());
    }
}
/**
 Employ{name='李白', age=5, salary=100}
 Employ{name='妲己', age=25, salary=2500}
 Employ{name='橘右京', age=38, salary=3800}
 Employ{name='元歌', age=99, salary=9999}
 */
```

----------

### 2.1 Employ.java

```java
public class Employ {

    String name;
    Integer age;
    BigDecimal salary;

    // generated by IDE, getters, setters, constructor, toString
}
```





## 3 引用对象特定类型的任意实例方法

1. lambda表达式中为第一个参数

```java
// arg0 is the first argument
(arg0, rest_of_args) -> arg0.methodName(rest_of_args)

// first argument type
arg0_Type::methodName

// arg0 is type of ClassName
ClassName::methodName
```



### 3.1 String类型案例

```java
public class SpecialTypeReference {
    public static void main(String[] args) {
        String str = "HelloWorld";
        doOneArgument(str, x -> x.length());
        doOneArgument(str,String::length);

        doTwoArgument(str,"Hello",(x,y) -> x.startsWith(y));
        doTwoArgument(str, "Hello", String::startsWith);
    }

    private static <T,R> R doOneArgument(T src, Function<T,R> func){
        return func.apply(src);
    }

    private static <T,R> R doTwoArgument(T str1, T str2, BiFunction<T,T,R> func){
        return func.apply(str1,str2);
    }
}
```

### 3.2 自定义类型案例

```java
public class ObjectMethodReference2 {
    public static void main(String[] args) {
        Goods goods = new Goods("Apple",BigDecimal.valueOf(13.5),3);
        Formula formula = new Formula();

        calculate(formula, goods, (a, b) -> a.normal(b));
        calculate(formula, goods, Formula::normal);
    }

    private static BigDecimal calculate(Formula formula, Goods goods, BiFunction<Formula,Goods,BigDecimal> func){
        return func.apply(formula,goods);
    }
}

class Formula{
    public BigDecimal normal(Goods goods){
       return goods
               .getPrice()
               .multiply(BigDecimal.valueOf(goods.getNumber()));
    }
}
```



```java
public class Goods {
    private String name;
    private BigDecimal price;
    private Integer number;
    // generated by IDE, getters, setters, constructor, toString
}
```



--------------



## 4 构造方法引用

```java
(args) -> new ClassName(args)
ClassName::new
```

### 4.1 无参构造参数

```java
public class ConstructReference {

    Supplier<Map> obj1 = () -> new HashMap();
    Supplier<Map> obj2 = HashMap::new;
}

```



### 4.2 有参构造参数

```java
public class ConstructReference2 {

    public static void main(String[] args) {
        List<String> names = Arrays.asList("橘右京","马可波罗","公孙离");
        
        fakePerson(names,Person::new)
                .forEach(System.out::println);
    }

    private static List<Person> fakePerson(List<String> names, Function<String,Person> func){
        Supplier<List<Person>> list =  ArrayList::new;
        List<Person> people = list.get();

        for(String name: names){
            people.add(func.apply(name));
        }

        return people;
    }
}
/**
 Person{name='橘右京'}
 Person{name='马可波罗'}
 Person{name='公孙离'}
 */
```



```java
public class Person {
    private String name;

    public Person(String name) {
        this.name = name;
    }
    
    // ... ...
 }
```



----------



## 5 参考

[mkyong java 8 method reference](https://mkyong.com/java8/java-8-method-references-double-colon-operator/)