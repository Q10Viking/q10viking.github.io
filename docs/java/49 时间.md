---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /java/
typora-root-url: ..\.vuepress\public
---



::: tip

本文章主要是基于Java8的开发包

:::

## 时间基础知识科普

### 格林威治时间

格林威治（又译格林尼治）是英国伦敦南郊原格林威治天文台的所在地，它是世界计算时间和地球经度的起点，国际经度会议 1884
年在美国华盛顿召开，会上通过协议，以经过格林威治天文台的经线为零度经线（即本初子午线），作为地球经度的起点，并以格林威治为“世界时区”的起点。

### 格林威治时间和北京时间的关系

格林威治时间被定义为世界时间，就是 0 时区，北京是东八区。也就是说格林威治时间的 1 日 0 点，对应到北京的时间就是 1 日 8 点。

### 时间戳💕

时间戳是指格林威治时间 `1970-01-01 00:00:00`（北京时间 `1970-01-01 08:00:00`）起至现在的总秒数。



## Java8之前的时间操作

### 时间

> 包括日期和时分秒

```java
import java.util.Calendar;
import java.util.Date;

public class DateDemo {
    public static void main(String[] args) {
        // 方式1
        Date date = new Date();
        System.out.println(date);
        // 方式2
        Calendar calendar = Calendar.getInstance();
        Date time = calendar.getTime();
        System.out.println(time);
    }
}
/**
 * Mon May 15 13:40:48 GMT+08:00 2023
 * Mon May 15 13:40:48 GMT+08:00 2023
 */
```

### 时间戳

```java
import java.util.Calendar;
import java.util.Date;

public class TimestampDemo {
    public static void main(String[] args) {
        long ts = new Date().getTime();
        System.out.println(ts);
        long ts2 = System.currentTimeMillis();
        System.out.println(ts2);
        long ts3 = Calendar.getInstance().getTimeInMillis();
        System.out.println(ts3);
        // java.sql.Date需要时间戳，而Java.util.Date不需要,直接返回当前时间
        java.sql.Date date = new java.sql.Date(ts);
        System.out.println(date);
    }
}
/**
 * 1684130747115
 * 1684130747115
 * 1684130747122
 * 2023-05-15
 */
```



### java.util.Date和java.sql.Date

- `java.util.Date`有无参构造参数，它会调用有参构造参数，传入的是当前时间

  ```java
  public Date() {
      this(System.currentTimeMillis());
  }
  ```

- `java.sql.Date`没有无参构造参数，只一个有参构造参数，需要时间戳。**针对SQL语句使用的，它只包含日期而没有时间部分**

> 它们都有getTime方法返回毫秒数

```java
public class SqlDateDemo {
    public static void main(String[] args) {
        java.util.Date utilDate = new java.util.Date();
        java.sql.Date sqlDate = new java.sql.Date(utilDate.getTime());

        System.out.println(utilDate);
        System.out.println(sqlDate);
        System.out.println(utilDate.getTime() == sqlDate.getTime());
    }
}
/**
 * Mon May 15 14:13:33 GMT+08:00 2023
 * 2023-05-15
 * true
 */
```

> 它们之间可以相互转化，依赖的就是时间戳



### 格式化

```java
public class SimpleDateFormatDemo {
    public static void main(String[] args) throws ParseException {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        Date date = new Date();
        String result = sdf.format(date);
        System.out.println(result);
        // 从字符串转换为日期
        date = sdf.parse("2023-05-15 14:26:12");
        System.out.println(date);
    }
}
/**
 * 2023-05-15 14:27:40
 * Mon May 15 14:26:12 GMT+08:00 2023
 */
```


SimpleDateFormat 构造参数的含义，请参考以下表格信息：

| **字符** | **含义**       | **示例**  |
| -------- | -------------- | --------- |
| y        | 年             | yyyy-1996 |
| M        | 月             | MM-07     |
| d        | 月中的天数     | dd-02     |
| D        | 年中的天数     | 121       |
| E        | 星期几         | 星期四    |
| H        | 小时数（0-23） | HH-23     |
| h        | 小时数（1-12） | hh-11     |
| m        | 分钟数         | mm-02     |
| s        | 秒数           | ss-03     |
| Z        | 时区           | +0800     |

使用示例：

  * 获取星期几：`new SimpleDateFormat("E").format(new Date())`
  * 获取当前时区：`new SimpleDateFormat("Z").format(new Date())`

**注意事项** ：在多线程下 SimpleDateFormat 是非线程安全的，因此在使用 SimpleDateFormat时要注意这个问题。在多线程下，如果使用不当，可能会造成结果不对或内存泄漏等问题。



### 时间转化

> 字符串和时间戳转Date

```java
public class ChangeDateTimeDemo {
    public static void main(String[] args) throws ParseException {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        // 从字符串转换为日期
        Date date1 = sdf.parse("2023-05-15 14:27:40");
        // 从日期转换为字符串
        String result = sdf.format(date1);
        System.out.println(result);

        System.out.println("====================================");

        long timestamp = System.currentTimeMillis();
        System.out.println(timestamp);
        // 从时间戳转换为日期
        Date date2 = new Date(timestamp);
        System.out.println(sdf.format(date2));

        Timestamp timestamp2 = new Timestamp(timestamp);
        System.out.println(sdf.format(timestamp2));

    }
}
/**
 * 2023-05-15 14:27:40
 * ====================================
 * 1684132587075
 * 2023-05-15 14:36:27
 * 2023-05-15 14:36:27
 */
```



## Java8时间操作

