---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /golang/
typora-root-url: ..\.vuepress\public
---



## 异常机制

::: tip

go语言没有try-catch，提倡返回error

:::

```go
import (
	"errors"
	"fmt"
)

func divide(a, b int) (int, error) {	
	if b == 0 {
		return -1, errors.New("divide by zero")
	}
	return a / b, nil
}

func main() {
	if _, err := divide(2, 0); err != nil {
		fmt.Println(err.Error())
	}
}
```

--------

## 自定义error

::: tip

error接口要求实现`Error() string`方法

:::

```go
type PathError struct {
	Path   string
	Op     string
	OpTime string
	Msg    string
}

// 实现接口函数
func (e *PathError) Error() string {
	return fmt.Sprintf("%s: %s %s at %s", e.Op, e.Path, e.Msg, e.OpTime)
}

func NewPathError(path string, msg string) *PathError {
	return &PathError{
		Path:   path,
		Msg:    msg,
		Op:     "create",
		OpTime: "Wed Nov 09 2022 15:33:05 GMT+0800",
	}
}

func deletePath(path string) error {
	if 2 > 1 {
		return NewPathError(path, "Not found")
	}
	return nil
}

func main() {
	if err := deletePath("/usr/loadbal/1.jpg"); err != nil {
		fmt.Println(err.Error())
	}
}
```

