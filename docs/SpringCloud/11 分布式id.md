---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /SpringCloud/
typora-root-url: ..\.vuepress\public
---



## 业务系统对分布式ID的需求

- **全局唯一性**：不能出现重复的ID号，既然是唯一标识，这是最基本的要求。
- **趋势递增**、**单调递增**：保证下一个ID一定大于上一个ID。
- **信息安全**：如果ID是连续的，恶意用户的扒取工作就非常容易做了，直接按照顺序下载指定URL即可；如果是订单号就更危险了，竞对可以直接知道我们一天的单量。所以在一些应用场景下，会需要ID无规则、不规则。



## UUID

[Source Code]()

UUID(Universally Unique Identifier)的标准型式包含32个16进制数字，以连字号分为五段，形式为8-4-4-4-12的36个字符

```java
package org.hzz;

import java.util.UUID;

public class UUIDDemo {
    public static void main(String[] args) {
        for (int i = 0; i < 5; i++) {
            String uuid = UUID.randomUUID().toString();
            System.out.println(uuid);

            String minUuid = uuid.replaceAll("-", "");
            System.out.println(minUuid);
            System.out.println("------------------------------------");
        }
    }
}
/**
 * e3b34629-a9e7-43ad-9eee-4e5b558343c3
 * e3b34629a9e743ad9eee4e5b558343c3
 * ------------------------------------
 * 5d63b7e4-2864-4ae2-91bb-fb4241729704
 * 5d63b7e428644ae291bbfb4241729704
 * ------------------------------------
 * 98d3e5c9-326d-4e7b-ad13-b551ec6e985a
 * 98d3e5c9326d4e7bad13b551ec6e985a
 * ------------------------------------
 * 741b14bb-d4f9-45ae-84bf-8327c321baa0
 * 741b14bbd4f945ae84bf8327c321baa0
 * ------------------------------------
 * 3746e1c8-5ea3-4eaa-aed9-7c99fc44b9fa
 * 3746e1c85ea34eaaaed97c99fc44b9fa
 * ------------------------------------
 */
```

### 优点

性能非常高：本地生成，没有网络消耗。

### 缺点

1. 不易于存储：UUID太长，16字节128位，通常以36长度的字符串表示，很多场景不适用。
2. 信息不安全：基于MAC地址生成UUID的算法可能会造成MAC地址泄露，这个漏洞曾被用于寻找梅丽莎病毒的制作者位置。
3. ID作为主键时在特定的环境会存在一些问题，比如做DB主键的场景下，UUID就非常不适用：
   1. MySQL官方有明确的建议主键要尽量越短越好[4]，36个字符长度的UUID不符合要求。
   2. 对MySQL索引不利：如果作为数据库主键，在InnoDB引擎下，UUID的无序性可能会引起数据位置频繁变动，严重影响性能。在MySQL InnoDB引擎中使用的是聚集索引，由于多数RDBMS使用B-tree的数据结构来存储索引数据，在主键的选择上面我们应该尽量使用有序的主键保证写入性能。