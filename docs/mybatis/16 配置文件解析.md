

properties文件

别名 POOLED JDBC

插件

dataSouce：jdbc事务JdbcTransactionFactory

TypeHandlerRegistry java类型对应数据库类型

mapper的解析根据Mapper接口包名转换成xml文件路径

Configuration对象重要的属性

MappedStatement对象



LinkedHashMap Lru实现

LinkedList FIFO实现

sql解析  组合设计模式

----------



SQL执行

```
StringJoiner
```





---------

Spring整合Mybatis

动态代理成为bean

FactoryBean

```
@Import(MapperScannerRegistrar.class)
@Repeatable(MapperScans.class)
public @interface MapperScan
```



SqlSessionTemplate是线程安全的ThreadLocal

DefaultSqlSession是不安全的



一级缓存生效需要@Transitional

因为底层SqlSessionTemplate每次都会开启一个DefaultSqlSession.

如果加了@Transitional，那么事务同步器会通过ThreadLocal缓存DefaultSqlSession.

Mybatis事务与Spring事务关联起来，是在SpringTransactionFactory中调用了DataSourceUtils.getConntection最终会从TransactionSynchronizationManager.getResource(dataSource)事务同步器中获取到由Spring事务管理的Connection.