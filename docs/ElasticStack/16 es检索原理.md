---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /ElasticStack/
typora-root-url: ..\.vuepress\public
---



## 检索原理

![img](/../../../../saas-yong/fullstack/Java架构师之路/Elastic Stack/imgs/3511)

1.  client发起查询请求，某个DataNode接收到请求，该DataNode就会成为协调节点（Coordinating Node）
2.  协调节点（Coordinating Node）将查询请求广播到每一个数据节点，**这些数据节点的分片会处理该查询请求**
3.  每个分片进行数据查询，将符合条件的数据放在一个优先队列中，并将这些数据的文档ID、节点信息、分片信息返回给协调节点
4.  协调节点将所有的结果进行汇总，并进行全局排序
5.  协调节点向包含这些文档ID的分片发送get请求，对应的分片将文档数据返回给协调节点，最后协调节点将数据返回给客户端