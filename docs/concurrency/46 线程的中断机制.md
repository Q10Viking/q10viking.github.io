---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /concurrency/
typora-root-url: ..\.vuepress\public
---



## API说明

- interrupt()： 将线程的中断标志位设置为true，不会停止线程
- isInterrupted(): 判断当前线程的中断标志位是否为true，不会清除中断标志位
- Thread.interrupted()：判断当前线程的中断标志位是否为true，并清除中断标志位，重置为fasle

[Source Code](https://github.com/Q10Viking/learncode/tree/main/concurrency/src/main/java/org/hzz/basic/interrupt)

```java
public class ThreadInterruptDemo {
    static int i = 0;
    public static void main(String[] args) {
        Thread t1 = new Thread(()->{
            while(true){
                i++;
                System.out.printf("i = %d\n",i);
                // isInterrupted不会清除中断标志位
                if(Thread.currentThread().isInterrupted()){
                    System.out.println("检测到中断标志");
                }
                if(i == 10){
                    System.out.println("检测到 i = 10 线程t1退出循环");
                    break;
                }
            }
        });

        t1.start();
        // 不会停止线程t1,只会设置一个中断标志位 flag=true
        t1.interrupt();
    }
}
/**
 * i = 1
 * 检测到中断标志
 * i = 2
 * 检测到中断标志
 * i = 3
 * 检测到中断标志
 * i = 4
 * 检测到中断标志
 * i = 5
 * 检测到中断标志
 * i = 6
 * 检测到中断标志
 * i = 7
 * 检测到中断标志
 * i = 8
 * 检测到中断标志
 * i = 9
 * 检测到中断标志
 * i = 10
 * 检测到中断标志
 * 检测到 i = 10 线程t1退出循环
 */
```



## 利用中断机制优雅停止线程

```java
while (!Thread.currentThread().isInterrupted() && more work to do) {
    do more work
```

[Source Code]()

```java
package org.hzz.basic.stop;

public class StopThreadDemo implements Runnable{
    public static void main(String[] args) throws InterruptedException {
        Thread thread = new Thread(new StopThreadDemo());
        thread.start();
        Thread.sleep(5);
        thread.interrupt();
    }

    @Override
    public void run() {
        int count = 0;
        while(!Thread.currentThread().isInterrupted()
        && count <= 1000){
            System.out.println("count = " + count++);
        }
        System.out.println("线程停止：stop thread");
    }
}
/**output: 可以看到线程终止循环不是因为count >= 1000
 * count = 140
 * count = 141
 * count = 142
 * 线程停止：stop thread
 */
```

