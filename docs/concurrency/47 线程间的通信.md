---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To 目录
  link: /concurrency/
typora-root-url: ..\.vuepress\public
---



## volatile

volatile有两大特性，一是可见性，二是有序性，禁止指令重排序，其中可见性就是可以让线程之间进行通信

[Source Code](https://github.com/Q10Viking/learncode/blob/main/concurrency/src/main/java/org/hzz/basic/communicate/VolatileDemoTest.java)

```java
public class VolatileDemoTest {
    private static volatile boolean flag;
    public static void main(String[] args) {
        new Thread(()->{
            while(true){
                if(!flag){
                    System.out.printf("%s turn on\n",Thread.currentThread().getName());
                    flag = true;
                }
            }
        },"t1").start();

        new Thread(()->{
            while(true){
                if(flag){
                    System.out.printf("%s turn off\n",Thread.currentThread().getName());
                    flag = false;
                }
            }
        },"t2").start();
    }
}
/**
 * ...
 * t1 turn on
 * t2 turn off
 * t1 turn on
 * t2 turn off
 * t1 turn on
 * t2 turn off
 * ...
 */
```

