"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[46440],{33208:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-5e6c3a72",path:"/ElasticStack/09%20%E6%96%87%E6%A1%A3%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/ElasticStack/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"批量获取文档数据",slug:"批量获取文档数据",children:[{level:3,title:"在URL中不指定index",slug:"在url中不指定index",children:[]},{level:3,title:"在URL中指定index",slug:"在url中指定index",children:[]}]},{level:2,title:"批量操作文档数据",slug:"批量操作文档数据",children:[{level:3,title:"批量创建文档",slug:"批量创建文档",children:[]},{level:3,title:"批量更新文档",slug:"批量更新文档",children:[]},{level:3,title:"批量删除文档",slug:"批量删除文档",children:[]}]}],filePathRelative:"ElasticStack/09 文档批量操作.md"}},57837:(n,s,a)=>{a.r(s),a.d(s,{default:()=>e});const t=(0,a(20641).Fv)('<h2 id="批量获取文档数据" tabindex="-1"><a class="header-anchor" href="#批量获取文档数据" aria-hidden="true">#</a> 批量获取文档数据</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>批量获取文档数据是通过**_mget**的API来实现的</p></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>请求方式：GET\n请求地址：_mget\n功能说明 ： 可以通过ID批量获取不同index和type的数据\n请求参数：\n\tdocs : 文档数组参数\n\t\t_index : 指定index\n\t\t_type : 指定type\n\t\t_id : 指定id\n\t\t_source : 指定要查询的字段\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="在url中不指定index" tabindex="-1"><a class="header-anchor" href="#在url中不指定index" aria-hidden="true">#</a> 在URL中不指定index</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET _mget\n<span class="token punctuation">{</span>\n  <span class="token property">&quot;docs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es_db&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es_db&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span>\n  <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="/images/elasticsearch/image-20220812220614521.png" alt="image-20220812220614521"></p><h3 id="在url中指定index" tabindex="-1"><a class="header-anchor" href="#在url中指定index" aria-hidden="true">#</a> 在URL中指定index</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /es_db/_mget\n<span class="token punctuation">{</span>\n  <span class="token property">&quot;docs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">{</span>\n      <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token number">2</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n      <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token number">3</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="/images/elasticsearch/image-20220812220837265.png" alt="image-20220812220837265"></p><h2 id="批量操作文档数据" tabindex="-1"><a class="header-anchor" href="#批量操作文档数据" aria-hidden="true">#</a> 批量操作文档数据</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>批量对文档进行写操作是通过**_bulk**的API来实现的</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>请求方式：POST\n请求地址：_bulk\n请求参数：通过_bulk操作文档，一般至少有两行参数<span class="token punctuation">(</span>或偶数行参数<span class="token punctuation">)</span>\n\t第一行参数为指定操作的类型及操作的对象<span class="token punctuation">(</span>index,type和id<span class="token punctuation">)</span>\n\t第二行参数才是操作的数据\n参数类似于：\n\n<span class="token punctuation">{</span><span class="token string">&quot;actionName&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;_index&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;indexName&quot;</span>, <span class="token string">&quot;_type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;typeName&quot;</span>,<span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token string">&quot;field1&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;value1&quot;</span>, <span class="token string">&quot;field2&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;value2&quot;</span><span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>actionName：表示操作类型，主要有create,index,delete和update</p></blockquote><h3 id="批量创建文档" tabindex="-1"><a class="header-anchor" href="#批量创建文档" aria-hidden="true">#</a> 批量创建文档</h3><h4 id="index形式" tabindex="-1"><a class="header-anchor" href="#index形式" aria-hidden="true">#</a> index形式</h4><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>如果原文档不存在，则是创建</li><li>如果原文档存在，则是<strong>替换</strong>(全量修改原文档）</li></ul></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST _bulk\n<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;learn es 3&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;hzz666&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;tags&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;面向对象&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span><span class="token number">1554015482530</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;learn es 4&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;静默NB&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;tags&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;面向对象&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span><span class="token number">1554015482530</span><span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="create形式" tabindex="-1"><a class="header-anchor" href="#create形式" aria-hidden="true">#</a> create形式</h4><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>create的方式，如果文档已经存在创建失败</p></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST _bulk\n<span class="token punctuation">{</span><span class="token property">&quot;create&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;learn es 3&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;q10viking&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;tags&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;面向对象&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span><span class="token number">1554015482530</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;create&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;learn es 6&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;q10viking&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;tags&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;面向对象&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span><span class="token number">1554015482530</span><span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/images/elasticsearch/image-20220812222323501.png" alt="image-20220812222323501"></p><h3 id="批量更新文档" tabindex="-1"><a class="header-anchor" href="#批量更新文档" aria-hidden="true">#</a> 批量更新文档</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST _bulk\n<span class="token punctuation">{</span><span class="token property">&quot;update&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;doc&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;ES大法必修内功&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;update&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;doc&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span><span class="token number">1554018421008</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="批量删除文档" tabindex="-1"><a class="header-anchor" href="#批量删除文档" aria-hidden="true">#</a> 批量删除文档</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST _bulk\n<span class="token punctuation">{</span><span class="token property">&quot;delete&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token punctuation">{</span><span class="token property">&quot;delete&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',25),p={},e=(0,a(66262).A)(p,[["render",function(n,s){return t}]])},66262:(n,s)=>{s.A=(n,s)=>{const a=n.__vccOpts||n;for(const[n,t]of s)a[n]=t;return a}}}]);