"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[70941],{74121:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-4315fae4",path:"/Docker/02%20%E5%AE%89%E8%A3%85Docker%20Desktop.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/Docker/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"Docker Desktop集成的功能",slug:"docker-desktop集成的功能",children:[]},{level:2,title:"安装Docker Desktop",slug:"安装docker-desktop",children:[]},{level:2,title:"启动",slug:"启动",children:[]},{level:2,title:"Docker镜像存储路径更改",slug:"docker镜像存储路径更改",children:[{level:3,title:"导出发行版",slug:"导出发行版",children:[]},{level:3,title:"注销(卸载)发行版",slug:"注销-卸载-发行版",children:[]},{level:3,title:"导入发行版",slug:"导入发行版",children:[]},{level:3,title:"查看注册表显示移动成功",slug:"查看注册表显示移动成功",children:[]}]},{level:2,title:"查看docker",slug:"查看docker",children:[]},{level:2,title:"配置国内镜像",slug:"配置国内镜像",children:[]},{level:2,title:"问题",slug:"问题",children:[{level:3,title:"启动DockerDesktop连带启动了其他子系统",slug:"启动dockerdesktop连带启动了其他子系统",children:[]},{level:3,title:"Hytep-v",slug:"hytep-v",children:[]}]}],filePathRelative:"Docker/02 安装Docker Desktop.md"}},32948:(n,s,a)=>{a.r(s),a.d(s,{default:()=>q});var e=a(20641);const r=(0,e.Lk)("div",{class:"custom-container tip"},[(0,e.Lk)("p",{class:"custom-container-title"},"TIP"),(0,e.Lk)("p",null,"在windows上安装Docker Desktop")],-1),p=(0,e.Lk)("h2",{id:"docker-desktop集成的功能",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#docker-desktop集成的功能","aria-hidden":"true"},"#"),(0,e.eW)(" Docker Desktop集成的功能")],-1),t={href:"https://docs.docker.com/desktop/",target:"_blank",rel:"noopener noreferrer"},l=(0,e.Fv)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Docker Engine\nDocker CLI client\nDocker Buildx\nDocker Compose\nDocker Content Trust\nKubernetes\nCredential Helper\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="安装docker-desktop" tabindex="-1"><a class="header-anchor" href="#安装docker-desktop" aria-hidden="true">#</a> 安装Docker Desktop</h2><blockquote><p>win11系统开启<code>适用于Linux的Windows子系统</code>之后，就满足<code>WSL 2 backend</code>的环境条件，可以直接安装Docker Desktop</p></blockquote>',3),o={href:"https://docs.docker.com/desktop/install/windows-install/",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Fv)('<h2 id="启动" tabindex="-1"><a class="header-anchor" href="#启动" aria-hidden="true">#</a> 启动</h2><p>启动docker-desktop软件后，子系统会启动类两个：docker-desktop和docker-desktop-data.这样在windows系统docker相关的命令才能使用,比如<code>docker version</code>命令。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PS C:\\Users\\11930\\Desktop&gt; wsl -l -v\n  NAME                   STATE           VERSION\n* docker-desktop         Running         2\n  golang-centos          Stopped         2\n  docker-desktop-data    Running         2\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这是我之前在windows安装的ubuntu</p><p><img src="/images/Docker/image-20221110202310663.png" alt="image-20221110202310663"></p><p>安装Docker Desktop之后，并且第一次启动,它会创建windows下的子系统。</p><p><img src="/images/Docker/image-20221110202822168.png" alt="image-20221110202822168"></p><h2 id="docker镜像存储路径更改" tabindex="-1"><a class="header-anchor" href="#docker镜像存储路径更改" aria-hidden="true">#</a> Docker镜像存储路径更改</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>避免docker的子系统占用C盘的空间，将它转移到另外的位置</p></div><h3 id="导出发行版" tabindex="-1"><a class="header-anchor" href="#导出发行版" aria-hidden="true">#</a> 导出发行版</h3>',10),i={href:"https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands#export-a-distribution-to-a-tar-file",target:"_blank",rel:"noopener noreferrer"},u=(0,e.Fv)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 停止</span>\nwsl <span class="token parameter variable">-t</span> docker-desktop-data\nwsl <span class="token parameter variable">-t</span> docker-desktop\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 需要停止运行</span>\nPS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> wsl <span class="token parameter variable">-l</span> <span class="token parameter variable">-v</span>\n  NAME                   STATE           VERSION\n* Ubuntu                 Stopped         <span class="token number">2</span>\n  docker-desktop-data    Stopped         <span class="token number">2</span>\n  docker-desktop         Stopped         <span class="token number">2</span>\n<span class="token comment"># 将分发版导出到 tar 文件。</span>\nPS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> wsl <span class="token parameter variable">--export</span> docker-desktop-data <span class="token string">&quot;E:\\wsl\\docker\\docker-desktop-data.tar&quot;</span>\nPS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> wsl <span class="token parameter variable">--export</span> docker-desktop <span class="token string">&quot;E:\\wsl\\docker\\docker-desktop.tar&quot;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="注销-卸载-发行版" tabindex="-1"><a class="header-anchor" href="#注销-卸载-发行版" aria-hidden="true">#</a> 注销(卸载)发行版</h3>',3),d={href:"https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands#unregister-or-uninstall-a-linux-distribution",target:"_blank",rel:"noopener noreferrer"},k=(0,e.Fv)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> wsl <span class="token parameter variable">--unregister</span> docker-desktop-data\n正在注销<span class="token punctuation">..</span>.\nPS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> wsl <span class="token parameter variable">--unregister</span> docker-desktop\n正在注销<span class="token punctuation">..</span>.\nPS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> wsl <span class="token parameter variable">-l</span> <span class="token parameter variable">-v</span>  <span class="token comment"># 查看已经卸载成功</span>\n  NAME      STATE           VERSION\n* Ubuntu    Stopped         <span class="token number">2</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="导入发行版" tabindex="-1"><a class="header-anchor" href="#导入发行版" aria-hidden="true">#</a> 导入发行版</h3>',2),b={href:"https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands#import-a-new-distribution",target:"_blank",rel:"noopener noreferrer"},m=(0,e.Fv)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 发行版名称  安装的位置  导入发行版的文件 使用的wsl版本2</span>\nPS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> wsl <span class="token parameter variable">--import</span> docker-desktop <span class="token string">&quot;E:\\wsl\\docker\\docker-desktop&quot;</span> <span class="token string">&quot;E:\\wsl\\docker\\docker-desktop.tar&quot;</span> <span class="token parameter variable">--version</span> <span class="token number">2</span>\nPS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> wsl <span class="token parameter variable">--import</span> docker-desktop-data <span class="token string">&quot;E:\\wsl\\docker\\docker-desktop-data&quot;</span> <span class="token string">&quot;E:\\wsl\\docker\\docker-desktop-data.tar&quot;</span> <span class="token parameter variable">--version</span> <span class="token number">2</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="查看注册表显示移动成功" tabindex="-1"><a class="header-anchor" href="#查看注册表显示移动成功" aria-hidden="true">#</a> 查看注册表显示移动成功</h3><blockquote><p>注册表的路径：HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Lxss</p></blockquote><p><img src="/images/Docker/image-20221110214810447.png" alt="image-20221110214810447"></p><h2 id="查看docker" tabindex="-1"><a class="header-anchor" href="#查看docker" aria-hidden="true">#</a> 查看docker</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span><span class="token number">11930</span><span class="token punctuation">\\</span>Desktop<span class="token operator">&gt;</span> <span class="token function">docker</span> version\nClient:\n Cloud integration: v1.0.29\n Version:           <span class="token number">20.10</span>.20\n API version:       <span class="token number">1.41</span>\n Go version:        go1.18.7\n Git commit:        9fdeb9c\n Built:             Tue Oct <span class="token number">18</span> <span class="token number">18</span>:28:44 <span class="token number">2022</span>\n OS/Arch:           windows/amd64\n Context:           default\n Experimental:      <span class="token boolean">true</span>\n\nServer: Docker Desktop <span class="token number">4.13</span>.1 <span class="token punctuation">(</span><span class="token number">90346</span><span class="token punctuation">)</span>\n Engine:\n  Version:          <span class="token number">20.10</span>.20\n  API version:      <span class="token number">1.41</span> <span class="token punctuation">(</span>minimum version <span class="token number">1.12</span><span class="token punctuation">)</span>\n  Go version:       go1.18.7\n  Git commit:       03df974\n  Built:            Tue Oct <span class="token number">18</span> <span class="token number">18</span>:18:35 <span class="token number">2022</span>\n  OS/Arch:          linux/amd64\n  Experimental:     <span class="token boolean">false</span>\n containerd:\n  Version:          <span class="token number">1.6</span>.8\n  GitCommit:        9cd3357b7fd7218e4aec3eae239db1f68a5a6ec6\n runc:\n  Version:          <span class="token number">1.1</span>.4\n  GitCommit:        v1.1.4-0-g5fd4c4d\n docker-init:\n  Version:          <span class="token number">0.19</span>.0\n  GitCommit:        de40ad0\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="配置国内镜像" tabindex="-1"><a class="header-anchor" href="#配置国内镜像" aria-hidden="true">#</a> 配置国内镜像</h2>',7),h=(0,e.Lk)("thead",null,[(0,e.Lk)("tr",null,[(0,e.Lk)("th",null,"说明"),(0,e.Lk)("th",null,"地址")])],-1),g=(0,e.Lk)("tr",null,[(0,e.Lk)("td",null,"Docker中国区官方镜像"),(0,e.Lk)("td",null,"https://registry.docker-cn.com")],-1),v=(0,e.Lk)("tr",null,[(0,e.Lk)("td",null,"网易"),(0,e.Lk)("td",null,"http://hub-mirror.c.163.com")],-1),f=(0,e.Lk)("tr",null,[(0,e.Lk)("td",null,"中国科学技术大学"),(0,e.Lk)("td",null,"https://docker.mirrors.ustc.edu.cn")],-1),w=(0,e.Lk)("td",null,"❤️阿里云(这个方式靠谱，推荐)❤️",-1),D={href:"https://cr.console.aliyun.com/",target:"_blank",rel:"noopener noreferrer"},L=(0,e.Fv)('<p><img src="/images/Docker/image-20221111005821969.png" alt="image-20221111005821969"></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;http://hub-mirror.c.163.com&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;https://registry.docker-cn.com&quot;</span>\n<span class="token punctuation">]</span>\n<span class="token comment">// 推荐使用阿里云</span>\n<span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n\t<span class="token string">&quot;https://p04z7k6j.mirror.aliyuncs.com&quot;</span>\n<span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="/images/Docker/image-20221111010315477.png" alt="image-20221111010315477"></p><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题" aria-hidden="true">#</a> 问题</h2><h3 id="启动dockerdesktop连带启动了其他子系统" tabindex="-1"><a class="header-anchor" href="#启动dockerdesktop连带启动了其他子系统" aria-hidden="true">#</a> 启动DockerDesktop连带启动了其他子系统</h3><p>启动DockerDesktop我的ubuntu也启动起来了</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span><span class="token number">11930</span><span class="token punctuation">\\</span>Desktop<span class="token operator">&gt;</span> wsl <span class="token parameter variable">-l</span> <span class="token parameter variable">-v</span>\n  NAME                   STATE           VERSION\n* Ubuntu                 Running         <span class="token number">2</span>\n  docker-desktop-data    Running         <span class="token number">2</span>\n  docker-desktop         Running         <span class="token number">2</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>',7),x={href:"https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands#set-default-linux-distribution",target:"_blank",rel:"noopener noreferrer"},S=(0,e.Fv)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span><span class="token number">11930</span><span class="token punctuation">\\</span>Desktop<span class="token operator">&gt;</span> wsl --set-default docker-desktop\nPS C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span><span class="token number">11930</span><span class="token punctuation">\\</span>Desktop<span class="token operator">&gt;</span> wsl <span class="token parameter variable">-l</span> <span class="token parameter variable">-v</span>\n  NAME                   STATE           VERSION\n* docker-desktop         Running         <span class="token number">2</span>\n  Ubuntu                 Stopped         <span class="token number">2</span>\n  docker-desktop-data    Running         <span class="token number">2</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="hytep-v" tabindex="-1"><a class="header-anchor" href="#hytep-v" aria-hidden="true">#</a> Hytep-v</h3><p>win11系统的更新导致hyper-v关闭。需要开启这个选项。其中windows系统会将hyper-v隐藏。需要我们自己处理给它显示出来。</p>',3),E={},q=(0,a(66262).A)(E,[["render",function(n,s){const a=(0,e.g2)("OutboundLink");return(0,e.uX)(),(0,e.CE)(e.FK,null,[r,p,(0,e.Lk)("p",null,[(0,e.Lk)("a",t,[(0,e.eW)("Docker Desktop | Docker Documentation"),(0,e.bF)(a)])]),l,(0,e.Lk)("p",null,[(0,e.Lk)("a",o,[(0,e.eW)("Install on Windows | Docker Documentation"),(0,e.bF)(a)])]),c,(0,e.Lk)("p",null,[(0,e.Lk)("a",i,[(0,e.eW)("WSL 的基本命令 | Microsoft Learn： export-a-distribution-to-a-tar-file"),(0,e.bF)(a)])]),u,(0,e.Lk)("p",null,[(0,e.Lk)("a",d,[(0,e.eW)("WSL 的基本命令 | Microsoft Learn： unregister-or-uninstall-a-linux-distribution"),(0,e.bF)(a)])]),k,(0,e.Lk)("p",null,[(0,e.Lk)("a",b,[(0,e.eW)("WSL 的基本命令 | Microsoft Learn：import-a-new-distribution"),(0,e.bF)(a)])]),m,(0,e.Lk)("table",null,[h,(0,e.Lk)("tbody",null,[g,v,f,(0,e.Lk)("tr",null,[w,(0,e.Lk)("td",null,[(0,e.eW)("登录："),(0,e.Lk)("a",D,[(0,e.eW)("https://cr.console.aliyun.com/"),(0,e.bF)(a)]),(0,e.eW)("。创建专属镜像")])])])]),L,(0,e.Lk)("p",null,[(0,e.eW)("修复方式，将docker-desktop设置为默认的发行版。"),(0,e.Lk)("a",x,[(0,e.eW)("WSL 设置默认的发行版 | Microsoft Learn"),(0,e.bF)(a)])]),S],64)}]])},66262:(n,s)=>{s.A=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);