"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[9312],{7348:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-f915f6de",path:"/ElasticStack/06%20%E6%8C%87%E5%AE%9A%E9%BB%98%E8%AE%A4%E5%88%86%E8%AF%8D%E5%99%A8.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/ElasticStack/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"指定IK分词器作为默认分词器",slug:"指定ik分词器作为默认分词器",children:[]},{level:2,title:"ik_smart（粗粒度）",slug:"ik-smart-粗粒度",children:[]},{level:2,title:"ik_max_world(细粒度)",slug:"ik-max-world-细粒度",children:[]}],filePathRelative:"ElasticStack/06 指定默认分词器.md"}},1264:(n,s,a)=>{a.r(s),a.d(s,{default:()=>t});const p=(0,a(20641).Fv)('<h2 id="指定ik分词器作为默认分词器" tabindex="-1"><a class="header-anchor" href="#指定ik分词器作为默认分词器" aria-hidden="true">#</a> <strong>指定IK分词器作为默认分词器</strong></h2><p>ES的默认分词设置是standard，这个在中文分词时就比较尴尬了，会单字拆分，比如我搜索关键词“清华大学”，这时候会按“清”，“华”，“大”，“学”去分词，然后搜出来的都是些“清清的河水”，“中华儿女”，“地大物博”，“学而不思则罔”之类的莫名其妙的结果，这里我们就想把这个分词方式修改一下，于是呢，就想到了ik分词器，有两种ik_smart和ik_max_word。</p><p><strong>ik_smart</strong>会将“清华大学”整个分为一个词，而<strong>ik_max_word</strong>会将“清华大学”分为“清华大学”，“清华”和“大学”，按需选其中之一就可以了。</p><p>修改默认分词方法(<strong>这里修改school_index索引的默认分词</strong>为：ik_max_word)：</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /school_index\n<span class="token punctuation">{</span>\n  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token property">&quot;analysis.analyzer.default.type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n# 或者\n\nPUT /news_website\n<span class="token punctuation">{</span>\n  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="ik-smart-粗粒度" tabindex="-1"><a class="header-anchor" href="#ik-smart-粗粒度" aria-hidden="true">#</a> ik_smart（粗粒度）</h2><p>ik_smart会将“清华大学”整个分为一个词。</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST _analyze\n<span class="token punctuation">{</span>\n<span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_smart&quot;</span><span class="token punctuation">,</span>\n<span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;清华大学&quot;</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/images/elasticsearch/image-20220812185354012.png" alt="image-20220812185354012"></p><h2 id="ik-max-world-细粒度" tabindex="-1"><a class="header-anchor" href="#ik-max-world-细粒度" aria-hidden="true">#</a> ik_max_world(细粒度)</h2><p>ik_max_word会将“清华大学”分为“清华大学”，“清华”和“大学”</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST _analyze\n<span class="token punctuation">{</span>\n    <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;清华大学&quot;</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/images/elasticsearch/image-20220812185610197.png" alt="image-20220812185610197"></p>',13),e={},t=(0,a(66262).A)(e,[["render",function(n,s){return p}]])},66262:(n,s)=>{s.A=(n,s)=>{const a=n.__vccOpts||n;for(const[n,p]of s)a[n]=p;return a}}}]);