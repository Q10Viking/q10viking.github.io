"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[20536],{98821:(n,s,e)=>{e.r(s),e.d(s,{data:()=>a});const a={key:"v-7d2b5d15",path:"/Docker/06%20centos%E5%AE%89%E8%A3%85docker.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/Docker/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"Docker安装",slug:"docker安装",children:[]},{level:2,title:"启动",slug:"启动",children:[{level:3,title:"配置加速镜像",slug:"配置加速镜像",children:[]}]},{level:2,title:"卸载",slug:"卸载",children:[]}],filePathRelative:"Docker/06 centos安装docker.md"}},78708:(n,s,e)=>{e.r(s),e.d(s,{default:()=>d});var a=e(20641);const r=(0,a.Lk)("h2",{id:"docker安装",tabindex:"-1"},[(0,a.Lk)("a",{class:"header-anchor",href:"#docker安装","aria-hidden":"true"},"#"),(0,a.eW)(" Docker安装")],-1),l=(0,a.Lk)("p",null,"Docker 是一个开源的商业产品，有两个版本：社区版（Community Edition，缩写为 CE）和企业版（Enterprise Edition，缩写为 EE）。企业版包含了一些收费服务，个人开发者一般用不到。下面的介绍都针对社区版。",-1),c=(0,a.Lk)("p",null,[(0,a.eW)("Docker CE 的安装请参考官方文档，"),(0,a.Lk)("strong",null,"我们这里以CentOS为例")],-1),p={href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"},o={href:"https://developer.aliyun.com/article/110806",target:"_blank",rel:"noopener noreferrer"},t=(0,a.Fv)('<ol><li>使用 root 权限登录 Centos。确保 yum 包更新到最新</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> update\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ol start="2"><li><p>使用 root 权限登录 Centos。确保 yum 包更新到最新</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum remove <span class="token parameter variable">-y</span> docker*\n<span class="token comment"># 相当于</span>\n<span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\\</span>\n                  docker-client <span class="token punctuation">\\</span>\n                  docker-client-latest <span class="token punctuation">\\</span>\n                  docker-common <span class="token punctuation">\\</span>\n                  docker-latest <span class="token punctuation">\\</span>\n                  docker-latest-logrotate <span class="token punctuation">\\</span>\n                  docker-logrotate <span class="token punctuation">\\</span>\n                  docker-engine\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>设置yum源，并更新 yum 的包索引</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 官方的</span>\nyum-config-manager <span class="token punctuation">\\</span>\n    --add-repo <span class="token punctuation">\\</span>\n    https://download.docker.com/linux/centos/docker-ce.repo\n    \n<span class="token comment"># 我们使用阿里云的</span>\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nyum makecache fast\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>可以查看所有仓库中所有docker版本，并选择特定版本安装</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum list docker-ce <span class="token parameter variable">--showduplicates</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-r</span>\n\n\ndocker-ce.x86_64            <span class="token number">3</span>:23.0.4-1.el7                      docker-ce-stable\ndocker-ce.x86_64            <span class="token number">3</span>:23.0.3-1.el7                      docker-ce-stable\ndocker-ce.x86_64            <span class="token number">3</span>:23.0.2-1.el7                      docker-ce-stable\ndocker-ce.x86_64            <span class="token number">3</span>:23.0.1-1.el7                      docker-ce-stable\ndocker-ce.x86_64            <span class="token number">3</span>:23.0.0-1.el7                      docker-ce-stable\ndocker-ce.x86_64            <span class="token number">3</span>:20.10.9-3.el7                     docker-ce-stable\ndocker-ce.x86_64            <span class="token number">3</span>:19.03.9-3.el7                     docker-ce-stable\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>安装docker</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 这是指定版本安装</span>\nyum <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce-3:19.03.9-3.el7.x86_64 \n          \n<span class="token comment"># 官方还提供了很多相关的工具</span>\nyum <span class="token function">install</span> docker-ce-<span class="token operator">&lt;</span>VERSION_STRING<span class="token operator">&gt;</span> docker-ce-cli-<span class="token operator">&lt;</span>VERSION_STRING<span class="token operator">&gt;</span> containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol><h2 id="启动" tabindex="-1"><a class="header-anchor" href="#启动" aria-hidden="true">#</a> 启动</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#启动</span>\nsystemctl start <span class="token function">docker</span>\n<span class="token comment"># 设置为开机启动</span>\nsystemctl start <span class="token function">docker</span> <span class="token operator">&amp;&amp;</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="配置加速镜像" tabindex="-1"><a class="header-anchor" href="#配置加速镜像" aria-hidden="true">#</a> 配置加速镜像</h3>',6),i={href:"https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors",target:"_blank",rel:"noopener noreferrer"},u=(0,a.Fv)('<blockquote><p>您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器</p></blockquote><p><img src="/images/Docker/image-20230423164255886.png" alt="image-20230423164255886"></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker\n<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">&#39;EOF&#39;\n{\n  &quot;registry-mirrors&quot;: [&quot;https://u8x09gus.mirror.aliyuncs.com&quot;]\n}\nEOF</span>\n<span class="token function">sudo</span> systemctl daemon-reload\n<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="卸载" tabindex="-1"><a class="header-anchor" href="#卸载" aria-hidden="true">#</a> 卸载</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum remove <span class="token parameter variable">-y</span> docker*\n<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/systemd/system/docker.service.d\n<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/docker\n<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/run/docker\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>',5),b={},d=(0,e(66262).A)(b,[["render",function(n,s){const e=(0,a.g2)("OutboundLink");return(0,a.uX)(),(0,a.CE)(a.FK,null,[r,l,c,(0,a.Lk)("p",null,[(0,a.Lk)("a",p,[(0,a.eW)("官网Install Docker Engine on CentOS | Docker Documentation"),(0,a.bF)(e)])]),(0,a.Lk)("p",null,[(0,a.Lk)("a",o,[(0,a.eW)("Docker CE 镜像源站-阿里云开发者社区 (aliyun.com)"),(0,a.bF)(e)])]),t,(0,a.Lk)("p",null,[(0,a.Lk)("a",i,[(0,a.eW)("容器镜像服务 (aliyun.com)"),(0,a.bF)(e)])]),u],64)}]])},66262:(n,s)=>{s.A=(n,s)=>{const e=n.__vccOpts||n;for(const[n,a]of s)e[n]=a;return e}}}]);