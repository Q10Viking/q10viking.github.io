"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[35872],{23734:(n,a,s)=>{s.r(a),s.d(a,{data:()=>e});const e={key:"v-c0294406",path:"/Docker/03%20%E9%95%9C%E5%83%8F%E5%88%B0%E5%AE%B9%E5%99%A8.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/Docker/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"Part 1",slug:"part-1",children:[{level:3,title:"创建Dockfile",slug:"创建dockfile",children:[]},{level:3,title:"构建镜像",slug:"构建镜像",children:[]},{level:3,title:"启动容器",slug:"启动容器",children:[]}]},{level:2,title:"Part 2",slug:"part-2",children:[{level:3,title:"停止并删除容器",slug:"停止并删除容器",children:[]}]},{level:2,title:"Part 3 分享镜像到Dockhub",slug:"part-3-分享镜像到dockhub",children:[{level:3,title:"创建仓库",slug:"创建仓库",children:[]},{level:3,title:"打标签",slug:"打标签",children:[]},{level:3,title:"提交",slug:"提交",children:[]}]},{level:2,title:"Part4",slug:"part4",children:[{level:3,title:"Play with Docker",slug:"play-with-docker",children:[]}]}],filePathRelative:"Docker/03 镜像到容器.md"}},79464:(n,a,s)=>{s.r(a),s.d(a,{default:()=>h});var e=s(20641);const r={class:"custom-container tip"},l=(0,e.Lk)("p",{class:"custom-container-title"},"TIP",-1),t={href:"https://docs.docker.com/get-started/",target:"_blank",rel:"noopener noreferrer"},o=(0,e.Fv)('<h2 id="part-1" tabindex="-1"><a class="header-anchor" href="#part-1" aria-hidden="true">#</a> Part 1</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>使用Docker部署应用的过程</p></div><h3 id="创建dockfile" tabindex="-1"><a class="header-anchor" href="#创建dockfile" aria-hidden="true">#</a> 创建Dockfile</h3><p>官网的Dockfile稍微改一下：主要是解决yarn 下载package的retrying的问题</p><ol><li>设置淘宝镜像</li><li>超时设置</li></ol><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># syntax=docker/dockerfile:1</span>\n<span class="token instruction"><span class="token keyword">FROM</span> node:12-alpine</span>\n<span class="token instruction"><span class="token keyword">RUN</span> apk add --no-cache python2 g++ make</span>\n<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>\n<span class="token instruction"><span class="token keyword">COPY</span> . .</span>\n<span class="token instruction"><span class="token keyword">RUN</span> yarn config set registry https://registry.npm.taobao.org</span>\n<span class="token instruction"><span class="token keyword">RUN</span> yarn install --production --network-timeout 1000000</span>\n<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;node&quot;</span>, <span class="token string">&quot;src/index.js&quot;</span>]</span>\n<span class="token instruction"><span class="token keyword">EXPOSE</span> 3000</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="构建镜像" tabindex="-1"><a class="header-anchor" href="#构建镜像" aria-hidden="true">#</a> 构建镜像</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -t tag标签(image name)  . 代表当前目录下的Dockerfile</span>\n<span class="token function">docker</span> build <span class="token parameter variable">-t</span> jingmo-hello-docker <span class="token builtin class-name">.</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/images/Docker/image-20221111144904615.png" alt=""></p><p>命令行查看</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> <span class="token function">docker</span> images\nREPOSITORY            TAG       IMAGE ID       CREATED        SIZE\njingmo-hello-docker   latest    ff9d6d43e333   <span class="token number">12</span> hours ago   403MB\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="启动容器" tabindex="-1"><a class="header-anchor" href="#启动容器" aria-hidden="true">#</a> 启动容器</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-dp</span> <span class="token number">3000</span>:3000 jingmo-hello-docker\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="/images/Docker/image-20221111144439879.png" alt="image-20221111144439879"></p><p>命令行查看</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> <span class="token function">docker</span> <span class="token function">ps</span>\nCONTAINER ID   IMAGE                 COMMAND                  CREATED         STATUS         PORTS                    NAMES\n1deef0e20d44   jingmo-hello-docker   <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   <span class="token number">5</span> minutes ago   Up <span class="token number">5</span> minutes   <span class="token number">0.0</span>.0.0:3000-<span class="token operator">&gt;</span><span class="token number">3000</span>/tcp   quirky_perlman\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="part-2" tabindex="-1"><a class="header-anchor" href="#part-2" aria-hidden="true">#</a> Part 2</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>容器的停止和删除.使用DockerDesktop操作更加方便，下面是使用命令行进行操作</p></div><h3 id="停止并删除容器" tabindex="-1"><a class="header-anchor" href="#停止并删除容器" aria-hidden="true">#</a> 停止并删除容器</h3><ol><li><p>查看容器的id</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> <span class="token function">docker</span> <span class="token function">ps</span>\nCONTAINER ID   IMAGE                        COMMAND                  CREATED              STATUS              PORTS                    NAMES\nd0b828096d35   jingmo-hello-docker:latest   <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   About a minute ago   Up About a minute   <span class="token number">0.0</span>.0.0:3000-<span class="token operator">&gt;</span><span class="token number">3000</span>/tcp   jingmo-test\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>停止容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> <span class="token function">docker</span> stop d0b828096d3\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>删除容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> <span class="token function">docker</span> <span class="token function">rm</span> d0b828096d3\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ol><h2 id="part-3-分享镜像到dockhub" tabindex="-1"><a class="header-anchor" href="#part-3-分享镜像到dockhub" aria-hidden="true">#</a> Part 3 分享镜像到Dockhub</h2><h3 id="创建仓库" tabindex="-1"><a class="header-anchor" href="#创建仓库" aria-hidden="true">#</a> 创建仓库</h3>',22),p={href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Fv)('<div class="custom-container tip"><p class="custom-container-title">TIP</p><p>new-repo是指：q10viking/learn-docker</p></div><p><img src="/images/Docker/image-20221111160548434.png" alt="image-20221111160548434"></p><h3 id="打标签" tabindex="-1"><a class="header-anchor" href="#打标签" aria-hidden="true">#</a> 打标签</h3><p>仓库名下有多个tag,每个tag对应一个image</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> <span class="token function">docker</span> images\nREPOSITORY            TAG       IMAGE ID       CREATED          SIZE\njingmo-hello-docker   latest    65ab054b14d8   <span class="token number">32</span> minutes ago   403MB\nPS C:<span class="token punctuation">\\</span><span class="token operator">&gt;</span> <span class="token function">docker</span> tag jingmo-hello-docker:latest q10viking/learn-docker:jingmo-hello-docker\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/images/Docker/image-20221111171905097.png" alt="image-20221111171905097"></p><h3 id="提交" tabindex="-1"><a class="header-anchor" href="#提交" aria-hidden="true">#</a> 提交</h3>',7),i={href:"https://stackoverflow.com/questions/41984399/denied-requested-access-to-the-resource-is-denied-docker",target:"_blank",rel:"noopener noreferrer"},d=(0,e.Fv)('<blockquote><p>需要namespace。也就是用户名</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span><span class="token number">1193</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>docker images\nREPOSITORY               TAG                   IMAGE ID       CREATED             SIZE\njingmo-hello-docker      latest                65ab054b14d8   About an hour ago   403MB\nq10viking/learn-docker   jingmo-hello-docker   65ab054b14d8   About an hour ago   403MB\nC:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span><span class="token number">1193</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>docker push q10viking/learn-docker:jingmo-hello-docker\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/images/Docker/image-20221111171747023.png" alt="image-20221111171747023"></p><p><img src="/images/Docker/image-20221111171812615.png" alt="image-20221111171812615"></p><h2 id="part4" tabindex="-1"><a class="header-anchor" href="#part4" aria-hidden="true">#</a> Part4</h2><h3 id="play-with-docker" tabindex="-1"><a class="header-anchor" href="#play-with-docker" aria-hidden="true">#</a> Play with Docker</h3>',6),u={href:"https://labs.play-with-docker.com/",target:"_blank",rel:"noopener noreferrer"},k=(0,e.Fv)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 会拉去DockerHub下q10viking/learn-docker这个仓库下的jingmo-hello-docker镜像</span>\n<span class="token function">docker</span> run <span class="token parameter variable">-dp</span> <span class="token number">3000</span>:3000 q10viking/learn-docker:jingmo-hello-docker\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/images/Docker/image-20221111182820219.png" alt="image-20221111182820219"></p>',2),b={},h=(0,s(66262).A)(b,[["render",function(n,a){const s=(0,e.g2)("OutboundLink");return(0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.Lk)("div",r,[l,(0,e.Lk)("p",null,[(0,e.eW)("参考官网的教程"),(0,e.Lk)("a",t,[(0,e.eW)("Get started | Docker Documentation"),(0,e.bF)(s)])])]),o,(0,e.Lk)("p",null,[(0,e.Lk)("a",p,[(0,e.eW)("https://hub.docker.com"),(0,e.bF)(s)])]),c,(0,e.Lk)("p",null,[(0,e.Lk)("a",i,[(0,e.eW)("dockerfile - denied: requested access to the resource is denied: docker - Stack Overflow"),(0,e.bF)(s)])]),d,(0,e.Lk)("p",null,[(0,e.Lk)("a",u,[(0,e.eW)("Play with Docker"),(0,e.bF)(s)])]),k],64)}]])},66262:(n,a)=>{a.A=(n,a)=>{const s=n.__vccOpts||n;for(const[n,e]of a)s[n]=e;return s}}}]);