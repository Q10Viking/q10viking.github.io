"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[26911],{90246:(s,n,a)=>{a.r(n),a.d(n,{data:()=>e});const e={key:"v-367b90ca",path:"/Redis/27%20Redis%E9%9B%86%E7%BE%A4%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/Redis/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"哨兵模式",slug:"哨兵模式",children:[]},{level:2,title:"高可用集群模式",slug:"高可用集群模式",children:[{level:3,title:"redis集群分片算法",slug:"redis集群分片算法",children:[]}]}],filePathRelative:"Redis/27 Redis集群方案对比.md"}},16127:(s,n,a)=>{a.r(n),a.d(n,{default:()=>l});var e=a(20641);const t=(0,e.Fv)('<h2 id="哨兵模式" tabindex="-1"><a class="header-anchor" href="#哨兵模式" aria-hidden="true">#</a> 哨兵模式</h2><p>在redis3.0以前的版本要实现集群一般是借助哨兵sentinel工具来监控master节点的状态，如果master节点异常，则会做主从切换，将某一台slave作为master，哨兵的配置略微复杂，并且性能和高可用性等各方面表现一般，特别是在主从切换的瞬间存在<strong>访问瞬断</strong>的情况，而且<strong>哨兵模式只有一个主节点对外提供服务，没法支持很高的并发</strong>，且<strong>单个主节点内存也不宜设置得过大，否则会导致持久化文件过大</strong>，影响数据恢复或主从同步的效率</p><p><img src="/images/Redis/806342" alt=""></p><h2 id="高可用集群模式" tabindex="-1"><a class="header-anchor" href="#高可用集群模式" aria-hidden="true">#</a> <strong>高可用集群模式</strong></h2><p>redis集群是一个由<strong>多个主从节点群组成的分布式服务器群</strong>，它具有<strong>复制、高可用和分片</strong>特性。<strong>Redis集群不需要sentinel哨兵·也能完成节点移除和故障转移的功能</strong>。需要将每个节点设置成集群模式，这种集群模式没有中心节点，可水平扩展，据官方文档称可以线性扩展到上万个节点(<strong>官方推荐不超过1000个节点</strong>)。redis集群的性能和高可用性均优于之前版本的哨兵模式，且集群配置非常简单</p><p>Redis 集群是一种分布式方案，可以将多个Redis节点组成一个逻辑集群，<strong>提供数据分片和自动故障恢复</strong>。每个节点负责存储和处理部分数据，通过节点间的数据分片和分布式算法保证数据的可用性和负载均衡。当集群中的某个节点出现故障时，集群会自动进行故障转移和恢复</p><p><img src="/images/Redis/image-20211114053648501.png" alt=""></p><h3 id="redis集群分片算法" tabindex="-1"><a class="header-anchor" href="#redis集群分片算法" aria-hidden="true">#</a> redis集群分片算法</h3>',8),p={class:"custom-container tip"},r=(0,e.Lk)("p",{class:"custom-container-title"},"TIP",-1),o={href:"https://github.com/Q10Viking/learncode/blob/main/redis/_01_java_redis/src/main/java/org/hzz/CRC16.java",target:"_blank",rel:"noopener noreferrer"},i=(0,e.Fv)('<div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**\n * Redis分片算法\n */</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CRC16</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">String</span> key<span class="token operator">=</span><span class="token string">&quot;user:q10viking&quot;</span><span class="token punctuation">;</span>\n        <span class="token comment">// 4132</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">JedisClusterCRC16</span><span class="token punctuation">.</span><span class="token function">getCRC16</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">16384</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>',1),c={},l=(0,a(66262).A)(c,[["render",function(s,n){const a=(0,e.g2)("OutboundLink");return(0,e.uX)(),(0,e.CE)(e.FK,null,[t,(0,e.Lk)("div",p,[r,(0,e.Lk)("p",null,[(0,e.Lk)("a",o,[(0,e.eW)("Source Code CRC16.java"),(0,e.bF)(a)])])]),i],64)}]])},66262:(s,n)=>{n.A=(s,n)=>{const a=s.__vccOpts||s;for(const[s,e]of n)a[s]=e;return a}}}]);