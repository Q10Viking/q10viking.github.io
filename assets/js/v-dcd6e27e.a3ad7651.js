"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[15480],{77226:(a,n,t)=>{t.r(n),t.d(n,{data:()=>s});const s={key:"v-dcd6e27e",path:"/rabbitmq/13%20%E6%B6%88%E8%B4%B9%E7%AB%AF%E5%89%8A%E5%B3%B0%E9%99%90%E6%B5%81.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/rabbitmq/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"消费端限流",slug:"消费端限流",children:[]},{level:2,title:"注意⭐",slug:"注意⭐",children:[]}],filePathRelative:"rabbitmq/13 消费端削峰限流.md"}},67703:(a,n,t)=>{t.r(n),t.d(n,{default:()=>p});const s=(0,t(20641).Fv)('<h2 id="消费端限流" tabindex="-1"><a class="header-anchor" href="#消费端限流" aria-hidden="true">#</a> 消费端限流</h2><p>请求瞬间增多，每秒5000个请求,消费端通过⭐<strong>prefetch</strong>⭐来控制每次拉去的消息数，来减少对消费端的流量冲击。</p><p><img src="/images/RabbitMQ/image-20211031061542923.png" alt="image-20211031061542923"></p><h2 id="注意⭐" tabindex="-1"><a class="header-anchor" href="#注意⭐" aria-hidden="true">#</a> 注意⭐</h2><ol><li><p>在<a href="rabbit:listener-container">rabbit:listener-container</a> 中配置 <strong>prefetch属性设置消费端一次拉取多少消息</strong></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">rabbit:</span>listener-container</span> <span class="token attr-name">connection-factory</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connectionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">acknowledge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manual<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prefetch</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p><strong>消费端的确认模式一定为手动确认。acknowledge=&quot;manual&quot;</strong></p></li></ol>',5),e={},p=(0,t(66262).A)(e,[["render",function(a,n){return s}]])},66262:(a,n)=>{n.A=(a,n)=>{const t=a.__vccOpts||a;for(const[a,s]of n)t[a]=s;return t}}}]);