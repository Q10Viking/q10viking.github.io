"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[39773],{68360:(a,n,s)=>{s.r(n),s.d(n,{data:()=>e});const e={key:"v-94f7cb5c",path:"/skywalking/03%20%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%85%A5%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/skywalking/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"IDEA开发时",slug:"idea开发时",children:[]},{level:2,title:"部署的时候",slug:"部署的时候",children:[]}],filePathRelative:"skywalking/03 服务接入链路追踪.md"}},66158:(a,n,s)=>{s.r(n),s.d(n,{default:()=>i});var e=s(20641);const p={class:"custom-container tip"},l=(0,e.Lk)("p",{class:"custom-container-title"},"TIP",-1),t={href:"https://q10viking.github.io/SpringCloud/04%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA.html",target:"_blank",rel:"noopener noreferrer"},r=(0,e.Fv)('<h2 id="idea开发时" tabindex="-1"><a class="header-anchor" href="#idea开发时" aria-hidden="true">#</a> IDEA开发时</h2><blockquote><p>在IDEA中使用Skywalking</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-javaagent:E:<span class="token punctuation">\\</span>apache<span class="token punctuation">\\</span>apache-skywalking-java-agent-8.11.0<span class="token punctuation">\\</span>skywalking-agent<span class="token punctuation">\\</span>skywalking-agent.jar\n<span class="token parameter variable">-DSW_AGENT_NAME</span><span class="token operator">=</span>mall-user\n<span class="token parameter variable">-DSW_AGENT_COLLECTOR_BACKEND_SERVICES</span><span class="token operator">=</span><span class="token number">192.168</span>.135.130:11800 \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-javaagent:E:<span class="token punctuation">\\</span>apache<span class="token punctuation">\\</span>apache-skywalking-java-agent-8.11.0<span class="token punctuation">\\</span>skywalking-agent<span class="token punctuation">\\</span>skywalking-agent.jar\n<span class="token parameter variable">-DSW_AGENT_NAME</span><span class="token operator">=</span>mall-order\n<span class="token parameter variable">-DSW_AGENT_COLLECTOR_BACKEND_SERVICES</span><span class="token operator">=</span><span class="token number">192.168</span>.135.130:11800 \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-javaagent:E:<span class="token punctuation">\\</span>apache<span class="token punctuation">\\</span>apache-skywalking-java-agent-8.11.0<span class="token punctuation">\\</span>skywalking-agent<span class="token punctuation">\\</span>skywalking-agent.jar\n<span class="token parameter variable">-DSW_AGENT_NAME</span><span class="token operator">=</span>mall-gateway\n<span class="token parameter variable">-DSW_AGENT_COLLECTOR_BACKEND_SERVICES</span><span class="token operator">=</span><span class="token number">192.168</span>.135.130:11800 \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/images/skywalking/image-20230308211542737.png" alt="image-20230308211542737"></p><h2 id="部署的时候" tabindex="-1"><a class="header-anchor" href="#部署的时候" aria-hidden="true">#</a> 部署的时候</h2><p>springboot程序，打成可执行jar包，写一个shell脚本，在启动项目的Shell脚本上，通过 -javaagent 参数进行配置SkyWalking Agent来追踪微服务</p><p>startup.sh脚本：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n<span class="token comment"># SkyWalking Agent配置</span>\n<span class="token builtin class-name">export</span> <span class="token assign-left variable">SW_AGENT_NAME</span><span class="token operator">=</span>springboot-skywalking-demo <span class="token comment">#Agent名字,一般使用`spring.application.name`</span>\n<span class="token builtin class-name">export</span> <span class="token assign-left variable">SW_AGENT_COLLECTOR_BACKEND_SERVICES</span><span class="token operator">=</span><span class="token number">192.168</span>.135.130:11800 <span class="token comment">#配置 Collector 地址。</span>\n<span class="token builtin class-name">export</span> <span class="token assign-left variable">SW_AGENT_SPAN_LIMIT</span><span class="token operator">=</span><span class="token number">2000</span> <span class="token comment">#配置链路的最大Span数量，默认为 300。</span>\n<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_AGENT</span><span class="token operator">=</span>-javaagent:/root/skywalking-agent/skywalking-agent.jar\n<span class="token function">java</span> <span class="token variable">$JAVA_AGENT</span> <span class="token parameter variable">-jar</span> springboot-skywalking-demo-0.0.1-SNAPSHOT.jar <span class="token comment">#jar启动</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>等同于</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">java</span> -javaagent:/root/skywalking-agent/skywalking-agent.jar \n<span class="token parameter variable">-DSW_AGENT_COLLECTOR_BACKEND_SERVICES</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:11800 \n<span class="token parameter variable">-DSW_AGENT_NAME</span><span class="token operator">=</span>springboot-skywalking-demo <span class="token parameter variable">-jar</span> springboot-skywalking-demo-0.0.1-SNAPSHOT.jar\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',12),o={},i=(0,s(66262).A)(o,[["render",function(a,n){const s=(0,e.g2)("OutboundLink");return(0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.Lk)("div",p,[l,(0,e.Lk)("p",null,[(0,e.Lk)("a",t,[(0,e.eW)("微服务链路追踪"),(0,e.bF)(s)])])]),r],64)}]])},66262:(a,n)=>{n.A=(a,n)=>{const s=a.__vccOpts||a;for(const[a,e]of n)s[a]=e;return s}}}]);