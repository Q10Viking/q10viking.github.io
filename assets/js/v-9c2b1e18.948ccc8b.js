"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[19961],{58583:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-9c2b1e18",path:"/mybatis/13%20springboot%E6%95%B4%E5%90%88druid.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/mybatis/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"环境搭建",slug:"环境搭建",children:[{level:3,title:"不太推荐：第一种配置DruidDataSource的Bean",slug:"不太推荐-第一种配置druiddatasource的bean",children:[]},{level:3,title:"推荐2：使用JDBC中的数据源",slug:"推荐2-使用jdbc中的数据源",children:[]}]},{level:2,title:"推荐：3种方法场景启动器配置方法❤️",slug:"推荐-3种方法场景启动器配置方法❤️",children:[{level:3,title:"自动配置的原理的分析",slug:"自动配置的原理的分析",children:[]},{level:3,title:"访问druid控制台",slug:"访问druid控制台",children:[]}]},{level:2,title:"配置详解",slug:"配置详解",children:[]}],filePathRelative:"mybatis/13 springboot整合druid.md"}},42442:(n,s,a)=>{a.r(s),a.d(s,{default:()=>u});var e=a(20641);const p=(0,e.Fv)('<h2 id="环境搭建" tabindex="-1"><a class="header-anchor" href="#环境搭建" aria-hidden="true">#</a> 环境搭建</h2><p>IDEA创建 spring项目</p><ol><li>引入spring Data JDBC的原因是为了方便去执行sql文件</li></ol><img src="/images/mybatis/image-20210823214003003.png" alt="image-20210823214003003" style="zoom:67%;"><ol start="2"><li><p>引入Druid依赖</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol><h3 id="不太推荐-第一种配置druiddatasource的bean" tabindex="-1"><a class="header-anchor" href="#不太推荐-第一种配置druiddatasource的bean" aria-hidden="true">#</a> 不太推荐：第一种配置DruidDataSource的Bean</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidConfig</span> <span class="token punctuation">{</span>\n\n    <span class="token annotation punctuation">@Bean</span>\n    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;spring.datasource&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 会根据DruidDataSource的setXXX方法将配置文件的属性注入到bean中</span>\n    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">druidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>spring<span class="token operator">:</span>\n  datasource<span class="token operator">:</span>\n    driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span>\n    type<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span>DruidDataSource</span>\n    username<span class="token operator">:</span> root\n    password<span class="token operator">:</span> root\n    url<span class="token operator">:</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>springboot_mybatis<span class="token operator">?</span>characterEncoding<span class="token operator">=</span>utf8<span class="token operator">&amp;</span>useSSL<span class="token operator">=</span><span class="token boolean">false</span><span class="token operator">&amp;</span>serverTimezone<span class="token operator">=</span><span class="token constant">UTC</span>\n    schema<span class="token operator">:</span> classpath<span class="token operator">:</span>sql<span class="token operator">/</span>schema<span class="token punctuation">.</span>sql   # 项目启动运行的sql脚本\n    initialization<span class="token operator">-</span>mode<span class="token operator">:</span> always  # 每次项目启动都会运行\n\n    #druid数据源其他配置\n\n    initialSize<span class="token operator">:</span> <span class="token number">5</span>  # 数据源初始化时建立的连接数\n    minIdle<span class="token operator">:</span> <span class="token number">5</span>\n    maxActive<span class="token operator">:</span> <span class="token number">21</span>\n    maxWait<span class="token operator">:</span> <span class="token number">5</span>\n    timeBetweenEvictionRunsMillis<span class="token operator">:</span> <span class="token number">60000</span>\n    minEvictableIdleTimeMillis<span class="token operator">:</span> <span class="token number">300000</span>\n    validationQuery<span class="token operator">:</span> <span class="token constant">SELECT</span> <span class="token number">1</span> <span class="token constant">FROM</span> <span class="token constant">DUAL</span>\n    testWhileIdle<span class="token operator">:</span> <span class="token boolean">true</span>\n    testOnBorrow<span class="token operator">:</span> <span class="token boolean">false</span>\n    testOnReturn<span class="token operator">:</span> <span class="token boolean">false</span>\n    poolPreparedStatements<span class="token operator">:</span> <span class="token boolean">true</span>\n    filters<span class="token operator">:</span> stat<span class="token punctuation">,</span>wall\n    maxPoolPreparedStatementPerConnectionSize<span class="token operator">:</span> <span class="token number">20</span>\n    useGlobalDataSourceStat<span class="token operator">:</span> <span class="token boolean">true</span>\n    connectionProperties<span class="token operator">:</span> druid<span class="token punctuation">.</span>stat<span class="token punctuation">.</span>mergeSql<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>druid<span class="token punctuation">.</span>stat<span class="token punctuation">.</span>slowSqlMillis<span class="token operator">=</span><span class="token number">500</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="推荐2-使用jdbc中的数据源" tabindex="-1"><a class="header-anchor" href="#推荐2-使用jdbc中的数据源" aria-hidden="true">#</a> 推荐2：使用JDBC中的数据源</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Bean</span>\n    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;spring.datasource.druid&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 单独指定了druid</span>\n    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">druidDataSource</span><span class="token punctuation">(</span><span class="token class-name">DataSourceProperties</span> dataSourceProperties<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> dataSourceProperties<span class="token punctuation">.</span><span class="token function">initializeDataSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>spring<span class="token operator">:</span>\n  datasource<span class="token operator">:</span>\n    driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span>\n    type<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span>DruidDataSource</span>\n    username<span class="token operator">:</span> root\n    password<span class="token operator">:</span> root\n    url<span class="token operator">:</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>springboot_mybatis<span class="token operator">?</span>characterEncoding<span class="token operator">=</span>utf8<span class="token operator">&amp;</span>useSSL<span class="token operator">=</span><span class="token boolean">false</span><span class="token operator">&amp;</span>serverTimezone<span class="token operator">=</span><span class="token constant">UTC</span>\n    schema<span class="token operator">:</span> classpath<span class="token operator">:</span>sql<span class="token operator">/</span>schema<span class="token punctuation">.</span>sql   # 项目启动运行的sql脚本\n    initialization<span class="token operator">-</span>mode<span class="token operator">:</span> always  # 每次项目启动都会运行\n\n    #druid数据源其他配置\n    druid<span class="token operator">:</span>\n      initialSize<span class="token operator">:</span> <span class="token number">5</span>  # 数据源初始化时建立的连接数\n      minIdle<span class="token operator">:</span> <span class="token number">5</span>\n      maxActive<span class="token operator">:</span> <span class="token number">21</span>\n      maxWait<span class="token operator">:</span> <span class="token number">5</span>\n      timeBetweenEvictionRunsMillis<span class="token operator">:</span> <span class="token number">60000</span>\n      minEvictableIdleTimeMillis<span class="token operator">:</span> <span class="token number">300000</span>\n      validationQuery<span class="token operator">:</span> <span class="token constant">SELECT</span> <span class="token number">1</span> <span class="token constant">FROM</span> <span class="token constant">DUAL</span>\n      testWhileIdle<span class="token operator">:</span> <span class="token boolean">true</span>\n      testOnBorrow<span class="token operator">:</span> <span class="token boolean">false</span>\n      testOnReturn<span class="token operator">:</span> <span class="token boolean">false</span>\n      poolPreparedStatements<span class="token operator">:</span> <span class="token boolean">true</span>\n      filters<span class="token operator">:</span> stat<span class="token punctuation">,</span>wall\n      maxPoolPreparedStatementPerConnectionSize<span class="token operator">:</span> <span class="token number">20</span>\n      useGlobalDataSourceStat<span class="token operator">:</span> <span class="token boolean">true</span>\n      connectionProperties<span class="token operator">:</span> druid<span class="token punctuation">.</span>stat<span class="token punctuation">.</span>mergeSql<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>druid<span class="token punctuation">.</span>stat<span class="token punctuation">.</span>slowSqlMillis<span class="token operator">=</span><span class="token number">500</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="推荐-3种方法场景启动器配置方法❤️" tabindex="-1"><a class="header-anchor" href="#推荐-3种方法场景启动器配置方法❤️" aria-hidden="true">#</a> 推荐：3种方法场景启动器配置方法❤️</h2>',12),t={class:"custom-container tip"},l=(0,e.Lk)("p",{class:"custom-container-title"},"TIP",-1),o={href:"https://github.com/Q10Viking/learncode/tree/main/mybatis/_09_springboot_druid",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Fv)('<p>以上两种方法都是基于直接依赖druid的方式，现在改为直接引入Druid的场景启动器</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>springboot 2.7.2的配置</p></blockquote><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>\n  <span class="token key atrule">sql</span><span class="token punctuation">:</span>\n    <span class="token key atrule">init</span><span class="token punctuation">:</span>\n      <span class="token key atrule">schema-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>sql/schema.sql\n      <span class="token key atrule">mode</span><span class="token punctuation">:</span> always\n  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>\n    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver\n    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource\n    <span class="token key atrule">username</span><span class="token punctuation">:</span> root\n    <span class="token key atrule">password</span><span class="token punctuation">:</span> Root.123456\n    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.187.135<span class="token punctuation">:</span>3306/springboot_mybatis<span class="token punctuation">?</span>characterEncoding=utf8<span class="token important">&amp;useSSL=false&amp;serverTimezone=UTC</span>\n    <span class="token comment">#druid数据源其他配置</span>\n    <span class="token key atrule">druid</span><span class="token punctuation">:</span>   <span class="token comment"># 需要添加</span>\n      <span class="token key atrule">initialSize</span><span class="token punctuation">:</span> <span class="token number">5</span>  <span class="token comment"># 数据源初始化时建立的连接数</span>\n      <span class="token key atrule">minIdle</span><span class="token punctuation">:</span> <span class="token number">5</span>\n      <span class="token key atrule">maxActive</span><span class="token punctuation">:</span> <span class="token number">21</span>\n      <span class="token key atrule">maxWait</span><span class="token punctuation">:</span> <span class="token number">5</span>\n      <span class="token key atrule">timeBetweenEvictionRunsMillis</span><span class="token punctuation">:</span> <span class="token number">60000</span>\n      <span class="token key atrule">minEvictableIdleTimeMillis</span><span class="token punctuation">:</span> <span class="token number">300000</span>\n      <span class="token key atrule">validationQuery</span><span class="token punctuation">:</span> SELECT 1 FROM DUAL\n      <span class="token key atrule">testWhileIdle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n      <span class="token key atrule">testOnBorrow</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>\n      <span class="token key atrule">testOnReturn</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>\n      <span class="token key atrule">poolPreparedStatements</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n      <span class="token key atrule">filters</span><span class="token punctuation">:</span> stat<span class="token punctuation">,</span>wall\n      <span class="token key atrule">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation">:</span> <span class="token number">20</span>\n      <span class="token key atrule">useGlobalDataSourceStat</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n      <span class="token key atrule">connectionProperties</span><span class="token punctuation">:</span> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500\n      <span class="token key atrule">stat-view-servlet</span><span class="token punctuation">:</span>\n        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n        <span class="token key atrule">login-password</span><span class="token punctuation">:</span> <span class="token number">123456</span>\n        <span class="token key atrule">login-username</span><span class="token punctuation">:</span> admin\n      <span class="token key atrule">web-stat-filter</span><span class="token punctuation">:</span>\n        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="自动配置的原理的分析" tabindex="-1"><a class="header-anchor" href="#自动配置的原理的分析" aria-hidden="true">#</a> 自动配置的原理的分析</h3><p>https://www.processon.com/view/link/6123f06f7d9c0856876e123c</p><p><img src="/images/mybatis/6123d56e0e3e743b327d3700.png" alt="img"></p><p>分析了源码之后我们就知道怎么配置了,需要添加druid的配置</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>\n  <span class="token key atrule">sql</span><span class="token punctuation">:</span>\n    <span class="token key atrule">init</span><span class="token punctuation">:</span>\n      <span class="token key atrule">schema-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>sql/schema.sql\n      <span class="token key atrule">mode</span><span class="token punctuation">:</span> always\n  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>\n    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver\n    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource\n    <span class="token key atrule">username</span><span class="token punctuation">:</span> root\n    <span class="token key atrule">password</span><span class="token punctuation">:</span> Root.123456\n    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.187.135<span class="token punctuation">:</span>3306/springboot_mybatis<span class="token punctuation">?</span>characterEncoding=utf8<span class="token important">&amp;useSSL=false&amp;serverTimezone=UTC</span>\n    <span class="token comment">#druid数据源其他配置</span>\n    <span class="token key atrule">druid</span><span class="token punctuation">:</span>   <span class="token comment"># 需要添加</span>\n      <span class="token key atrule">initialSize</span><span class="token punctuation">:</span> <span class="token number">5</span>  <span class="token comment"># 数据源初始化时建立的连接数</span>\n      <span class="token key atrule">minIdle</span><span class="token punctuation">:</span> <span class="token number">5</span>\n      <span class="token key atrule">maxActive</span><span class="token punctuation">:</span> <span class="token number">21</span>\n      <span class="token key atrule">maxWait</span><span class="token punctuation">:</span> <span class="token number">5</span>\n      <span class="token key atrule">timeBetweenEvictionRunsMillis</span><span class="token punctuation">:</span> <span class="token number">60000</span>\n      <span class="token key atrule">minEvictableIdleTimeMillis</span><span class="token punctuation">:</span> <span class="token number">300000</span>\n      <span class="token key atrule">validationQuery</span><span class="token punctuation">:</span> SELECT 1 FROM DUAL\n      <span class="token key atrule">testWhileIdle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n      <span class="token key atrule">testOnBorrow</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>\n      <span class="token key atrule">testOnReturn</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>\n      <span class="token key atrule">poolPreparedStatements</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n      <span class="token key atrule">filters</span><span class="token punctuation">:</span> stat<span class="token punctuation">,</span>wall\n      <span class="token key atrule">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation">:</span> <span class="token number">20</span>\n      <span class="token key atrule">useGlobalDataSourceStat</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n      <span class="token key atrule">connectionProperties</span><span class="token punctuation">:</span> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500\n      <span class="token key atrule">stat-view-servlet</span><span class="token punctuation">:</span>\n        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n        <span class="token key atrule">login-password</span><span class="token punctuation">:</span> <span class="token number">123456</span>\n        <span class="token key atrule">login-username</span><span class="token punctuation">:</span> admin\n      <span class="token key atrule">web-stat-filter</span><span class="token punctuation">:</span>\n        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="访问druid控制台" tabindex="-1"><a class="header-anchor" href="#访问druid控制台" aria-hidden="true">#</a> 访问druid控制台</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>http://localhost:8080/druid/\n用户名密码就是配置的信息\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="配置详解" tabindex="-1"><a class="header-anchor" href="#配置详解" aria-hidden="true">#</a> 配置详解</h2><p><img src="/images/mybatis/image-4.png" alt="img"></p>',13),r={},u=(0,a(66262).A)(r,[["render",function(n,s){const a=(0,e.g2)("OutboundLink");return(0,e.uX)(),(0,e.CE)(e.FK,null,[p,(0,e.Lk)("div",t,[l,(0,e.Lk)("p",null,[(0,e.Lk)("a",o,[(0,e.eW)("Source Code"),(0,e.bF)(a)])])]),c],64)}]])},66262:(n,s)=>{s.A=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);