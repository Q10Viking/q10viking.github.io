"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[27956],{7091:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-50ffa376",path:"/MongoDB/02%20CRUD%20Basic.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/MongoDB/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"find",slug:"find",children:[{level:3,title:"count",slug:"count",children:[]},{level:3,title:"pretty",slug:"pretty",children:[]}]},{level:2,title:"insert",slug:"insert",children:[{level:3,title:"insertOne",slug:"insertone",children:[]},{level:3,title:"插入多个",slug:"插入多个",children:[]},{level:3,title:"自动创建collection",slug:"自动创建collection",children:[]}]},{level:2,title:"update",slug:"update",children:[{level:3,title:"updateOne",slug:"updateone",children:[]},{level:3,title:"updateMany",slug:"updatemany",children:[]},{level:3,title:"注意",slug:"注意",children:[]}]},{level:2,title:"delete",slug:"delete",children:[{level:3,title:"deleteOne",slug:"deleteone",children:[]},{level:3,title:"deleteMany",slug:"deletemany",children:[]}]},{level:2,title:"删除collection",slug:"删除collection",children:[{level:3,title:"drop",slug:"drop",children:[]}]}],filePathRelative:"MongoDB/02 CRUD Basic.md"}},9342:(n,s,a)=>{a.r(s),a.d(s,{default:()=>w});var e=a(20641);const t=(0,e.Fv)('<blockquote><p>json中，field居然可以有空格</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n    <span class="token property">&quot;birth year&quot;</span><span class="token operator">:</span> <span class="token number">1961</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;start station name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Howard St &amp; Centre St&quot;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="find" tabindex="-1"><a class="header-anchor" href="#find" aria-hidden="true">#</a> find</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Data Explore</p></div><h3 id="count" tabindex="-1"><a class="header-anchor" href="#count" aria-hidden="true">#</a> count</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>使用JSON来进行查询query，JSON用来过滤</p></div><p><img src="/images/MongoDB/image-20221013201642737.png" alt="image-20221013201642737"></p><h3 id="pretty" tabindex="-1"><a class="header-anchor" href="#pretty" aria-hidden="true">#</a> pretty</h3><p><img src="/images/MongoDB/image-20221013202003051.png" alt="image-20221013202003051"></p><h2 id="insert" tabindex="-1"><a class="header-anchor" href="#insert" aria-hidden="true">#</a> insert</h2><h3 id="insertone" tabindex="-1"><a class="header-anchor" href="#insertone" aria-hidden="true">#</a> insertOne</h3><h4 id="使用compass" tabindex="-1"><a class="header-anchor" href="#使用compass" aria-hidden="true">#</a> 使用Compass</h4><p>使用Compass插入一个document，体验感很好。</p><p><img src="/images/MongoDB/image-20221013204057844.png" alt="image-20221013204057844"></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;$oid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;634805f1fdc811be8ae13b1c&quot;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1012-2015-VIKI&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;business_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Learning MongoDB&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;$date&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token property">&quot;$numberLong&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1429632000000&quot;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Violation Issued&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;sector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Home Improvement Contractor - 100&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BeiJing&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token number">11428</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;210TH ST&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token number">9440</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="使用shell" tabindex="-1"><a class="header-anchor" href="#使用shell" aria-hidden="true">#</a> 使用shell</h4><blockquote><p>由于<code>_id</code>是唯一的，复制后先删除它，在进行内容的修改, <code>_id</code>会由MongDB自动生成，如果不指定</p></blockquote><p>在MongoDB中文档的内容可以完全一样，但是必须<code>_id</code>不一样。当然可以通过MongoDB&#39;s schema validation functionality来限制插入文档的内容。</p><p><img src="/images/MongoDB/image-20221013205936187.png" alt="image-20221013205936187"></p><h3 id="插入多个" tabindex="-1"><a class="header-anchor" href="#插入多个" aria-hidden="true">#</a> 插入多个</h3><p>用数组包裹</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.inspections.insert<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>,<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>,\n                       <span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span>, <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="ordered" tabindex="-1"><a class="header-anchor" href="#ordered" aria-hidden="true">#</a> ordered</h4><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>默认是true</p></div><p>看下面的案例，test 2和test 3都没有被插入进去，由于是顺序插入，当发现错误的时候，后面的就停止插入了，最后只有一条数据test 1被插入进去。</p><details class="custom-container details"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Atlas atlas-tt61iy-shard-0 <span class="token punctuation">[</span>primary<span class="token punctuation">]</span> sample_training<span class="token operator">&gt;</span> db.inspections.insert<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>,<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>,\n<span class="token punctuation">..</span>.                        <span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span>, <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\nUncaught:\nMongoBulkWriteError: E11000 duplicate key error collection: sample_training.inspections index: _id_ dup key: <span class="token punctuation">{</span> _id: <span class="token number">1</span> <span class="token punctuation">}</span>\nResult: BulkWriteResult <span class="token punctuation">{</span>\n  result: <span class="token punctuation">{</span>\n    ok: <span class="token number">1</span>,\n    writeErrors: <span class="token punctuation">[</span>\n      WriteError <span class="token punctuation">{</span>\n        err: <span class="token punctuation">{</span>\n          index: <span class="token number">1</span>,\n          code: <span class="token number">11000</span>,\n          errmsg: <span class="token string">&#39;E11000 duplicate key error collection: sample_training.inspections index: _id_ dup key: { _id: 1 }&#39;</span>,\n          errInfo: undefined,\n          op: <span class="token punctuation">{</span> _id: <span class="token number">1</span>, test: <span class="token number">2</span> <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>,\n    writeConcernErrors: <span class="token punctuation">[</span><span class="token punctuation">]</span>,\n    insertedIds: <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span> index: <span class="token number">0</span>, _id: <span class="token number">1</span> <span class="token punctuation">}</span>,\n      <span class="token punctuation">{</span> index: <span class="token number">1</span>, _id: <span class="token number">1</span> <span class="token punctuation">}</span>,\n      <span class="token punctuation">{</span> index: <span class="token number">2</span>, _id: <span class="token number">3</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>,\n    nInserted: <span class="token number">1</span>,\n    nUpserted: <span class="token number">0</span>,\n    nMatched: <span class="token number">0</span>,\n    nModified: <span class="token number">0</span>,\n    nRemoved: <span class="token number">0</span>,\n    upserted: <span class="token punctuation">[</span><span class="token punctuation">]</span>,\n    opTime: <span class="token punctuation">{</span> ts: Timestamp<span class="token punctuation">(</span><span class="token punctuation">{</span> t: <span class="token number">1665667043</span>, i: <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>, t: Long<span class="token punctuation">(</span><span class="token string">&quot;17&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\nAtlas atlas-tt61iy-shard-0 <span class="token punctuation">[</span>primary<span class="token punctuation">]</span> sample_training<span class="token operator">&gt;</span> db.inspections.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span>:3<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nAtlas atlas-tt61iy-shard-0 <span class="token punctuation">[</span>primary<span class="token punctuation">]</span> sample_training<span class="token operator">&gt;</span> db.inspections.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">[</span> <span class="token punctuation">{</span> _id: <span class="token number">1</span>, test: <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div></details><blockquote><p>设置ordered为false,当出现错误的时候仍然插入后面的。此时可以看到test 3被插入进去了，尽管前面的test 1,test 2出现了key重复的问题。</p></blockquote><details class="custom-container details"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Atlas atlas-tt61iy-shard-0 <span class="token punctuation">[</span>primary<span class="token punctuation">]</span> sample_training<span class="token operator">&gt;</span> db.inspections.insert<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>,<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>,\n<span class="token punctuation">..</span>.                        <span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span>, <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token punctuation">{</span> <span class="token string">&quot;ordered&quot;</span><span class="token builtin class-name">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\nUncaught:\nMongoBulkWriteError: E11000 duplicate key error collection: sample_training.inspections index: _id_ dup key: <span class="token punctuation">{</span> _id: <span class="token number">1</span> <span class="token punctuation">}</span>\nResult: BulkWriteResult <span class="token punctuation">{</span>\n  result: <span class="token punctuation">{</span>\n    ok: <span class="token number">1</span>,\n    writeErrors: <span class="token punctuation">[</span>\n      WriteError <span class="token punctuation">{</span>\n        err: <span class="token punctuation">{</span>\n          index: <span class="token number">0</span>,\n          code: <span class="token number">11000</span>,\n          errmsg: <span class="token string">&#39;E11000 duplicate key error collection: sample_training.inspections index: _id_ dup key: { _id: 1 }&#39;</span>,\n          errInfo: undefined,\n          op: <span class="token punctuation">{</span> _id: <span class="token number">1</span>, test: <span class="token number">1</span> <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>,\n      WriteError <span class="token punctuation">{</span>\n        err: <span class="token punctuation">{</span>\n          index: <span class="token number">1</span>,\n          code: <span class="token number">11000</span>,\n          errmsg: <span class="token string">&#39;E11000 duplicate key error collection: sample_training.inspections index: _id_ dup key: { _id: 1 }&#39;</span>,\n          errInfo: undefined,\n          op: <span class="token punctuation">{</span> _id: <span class="token number">1</span>, test: <span class="token number">2</span> <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>,\n    writeConcernErrors: <span class="token punctuation">[</span><span class="token punctuation">]</span>,\n    insertedIds: <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span> index: <span class="token number">0</span>, _id: <span class="token number">1</span> <span class="token punctuation">}</span>,\n      <span class="token punctuation">{</span> index: <span class="token number">1</span>, _id: <span class="token number">1</span> <span class="token punctuation">}</span>,\n      <span class="token punctuation">{</span> index: <span class="token number">2</span>, _id: <span class="token number">3</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>,\n    nInserted: <span class="token number">1</span>,\n    nUpserted: <span class="token number">0</span>,\n    nMatched: <span class="token number">0</span>,\n    nModified: <span class="token number">0</span>,\n    nRemoved: <span class="token number">0</span>,\n    upserted: <span class="token punctuation">[</span><span class="token punctuation">]</span>,\n    opTime: <span class="token punctuation">{</span> ts: Timestamp<span class="token punctuation">(</span><span class="token punctuation">{</span> t: <span class="token number">1665667392</span>, i: <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>, t: Long<span class="token punctuation">(</span><span class="token string">&quot;17&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\nAtlas atlas-tt61iy-shard-0 <span class="token punctuation">[</span>primary<span class="token punctuation">]</span> sample_training<span class="token operator">&gt;</span> db.inspections.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span>:3<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">[</span> <span class="token punctuation">{</span> _id: <span class="token number">3</span>, test: <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div></details><h3 id="自动创建collection" tabindex="-1"><a class="header-anchor" href="#自动创建collection" aria-hidden="true">#</a> 自动创建collection</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>如果向一个不存在的集合插入数据，mongodb不会报错，而是会直接创建。真的是太灵活了。</p></div><p><img src="/images/MongoDB/image-20221013212910178.png" alt="image-20221013212910178"></p><hr><h2 id="update" tabindex="-1"><a class="header-anchor" href="#update" aria-hidden="true">#</a> update</h2>',33),p={class:"custom-container tip"},o=(0,e.Lk)("p",{class:"custom-container-title"},"TIP",-1),l=(0,e.Lk)("p",null,"官网提供了很详细的解释，并且带有example",-1),c={href:"https://www.mongodb.com/docs/manual/tutorial/update-documents/",target:"_blank",rel:"noopener noreferrer"},u={href:"https://www.mongodb.com/docs/manual/reference/operator/update/?&_ga=2.62271524.903548860.1665632456-835634694.1665632456#id1",target:"_blank",rel:"noopener noreferrer"},i=(0,e.Lk)("h3",{id:"updateone",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#updateone","aria-hidden":"true"},"#"),(0,e.eW)(" updateOne")],-1),r={href:"https://www.mongodb.com/docs/manual/reference/operator/update/set/",target:"_blank",rel:"noopener noreferrer"},b=(0,e.Lk)("p",null,"如果筛选出来多个文档，它只会更新第一个",-1),k={href:"https://www.mongodb.com/docs/manual/reference/method/db.collection.updateOne/#mongodb-method-db.collection.updateOne",target:"_blank",rel:"noopener noreferrer"},d=(0,e.Lk)("code",null,"db.collection.updateOne()",-1),m={href:"https://www.mongodb.com/docs/manual/reference/method/db.collection.updateOne/#std-label-update-one-filter",target:"_blank",rel:"noopener noreferrer"},g={href:"https://www.mongodb.com/docs/manual/reference/method/db.collection.updateOne/#std-label-update-one-update",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.mongodb.com/docs/manual/reference/method/db.collection.updateOne/#updates-a-single-document",target:"_blank",rel:"noopener noreferrer"},q=(0,e.Fv)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 根据筛选条件，设置pop字段为17630</span>\ndb.zips.updateOne<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;zip&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;12534&quot;</span> <span class="token punctuation">}</span>, <span class="token punctuation">{</span> <span class="token string">&quot;<span class="token variable">$set</span>&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;pop&quot;</span><span class="token builtin class-name">:</span> <span class="token number">17630</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="updatemany" tabindex="-1"><a class="header-anchor" href="#updatemany" aria-hidden="true">#</a> updateMany</h3>',2),v={href:"https://www.mongodb.com/docs/manual/reference/operator/update/inc/#mongodb-update-up.-inc",target:"_blank",rel:"noopener noreferrer"},f=(0,e.Fv)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 根据筛选条件，全部更新，pop字段都加10</span>\ndb.zips.updateMany<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;city&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;HUDSON&quot;</span> <span class="token punctuation">}</span>, <span class="token punctuation">{</span> <span class="token string">&quot;<span class="token variable">$inc</span>&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;pop&quot;</span><span class="token builtin class-name">:</span> <span class="token number">10</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.zips.updateOne({ &quot;city&quot;: &quot;HUDSON&quot; }, { &quot;$inc&quot;: { &quot;pop&quot;: 10 } })\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="注意" tabindex="-1"><a class="header-anchor" href="#注意" aria-hidden="true">#</a> 注意</h3><p>如果更新的字段不存在，则会自动创建</p><h2 id="delete" tabindex="-1"><a class="header-anchor" href="#delete" aria-hidden="true">#</a> delete</h2>',5),_={href:"https://www.mongodb.com/docs/manual/tutorial/remove-documents/",target:"_blank",rel:"noopener noreferrer"},y=(0,e.Fv)('<h3 id="deleteone" tabindex="-1"><a class="header-anchor" href="#deleteone" aria-hidden="true">#</a> deleteOne</h3><p>删除匹配到的第一个</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Atlas atlas-tt61iy-shard-0 <span class="token punctuation">[</span>primary<span class="token punctuation">]</span> sample_training<span class="token operator">&gt;</span> db.inspections.find<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>.pretty<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">[</span>\n  <span class="token punctuation">{</span> _id: ObjectId<span class="token punctuation">(</span><span class="token string">&quot;63480f62c0b33efb0b474479&quot;</span><span class="token punctuation">)</span>, test: <span class="token number">3</span> <span class="token punctuation">}</span>,\n  <span class="token punctuation">{</span> _id: <span class="token number">3</span>, test: <span class="token number">3</span> <span class="token punctuation">}</span>\n<span class="token punctuation">]</span>\nAtlas atlas-tt61iy-shard-0 <span class="token punctuation">[</span>primary<span class="token punctuation">]</span> sample_training<span class="token operator">&gt;</span> db.inspections.deleteOne<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;test&quot;</span>:3<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span> acknowledged: true, deletedCount: <span class="token number">1</span> <span class="token punctuation">}</span>\nAtlas atlas-tt61iy-shard-0 <span class="token punctuation">[</span>primary<span class="token punctuation">]</span> sample_training<span class="token operator">&gt;</span> db.inspections.find<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>.pretty<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">[</span> <span class="token punctuation">{</span> _id: <span class="token number">3</span>, test: <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="deletemany" tabindex="-1"><a class="header-anchor" href="#deletemany" aria-hidden="true">#</a> deleteMany</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.inspections.deleteMany<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="删除collection" tabindex="-1"><a class="header-anchor" href="#删除collection" aria-hidden="true">#</a> 删除collection</h2><h3 id="drop" tabindex="-1"><a class="header-anchor" href="#drop" aria-hidden="true">#</a> drop</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.inspection.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',8),x={},w=(0,a(66262).A)(x,[["render",function(n,s){const a=(0,e.g2)("OutboundLink");return(0,e.uX)(),(0,e.CE)(e.FK,null,[t,(0,e.Lk)("div",p,[o,l,(0,e.Lk)("p",null,[(0,e.Lk)("a",c,[(0,e.eW)("Update Documents — MongoDB Manual"),(0,e.bF)(a)])]),(0,e.Lk)("p",null,[(0,e.Lk)("a",u,[(0,e.eW)("Update Operators — MongoDB Manual"),(0,e.bF)(a)])])]),i,(0,e.Lk)("p",null,[(0,e.Lk)("a",r,[(0,e.eW)("$set — MongoDB Manual"),(0,e.bF)(a)])]),b,(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[(0,e.Lk)("a",k,[d,(0,e.bF)(a)]),(0,e.eW)(" finds the first document that matches the "),(0,e.Lk)("a",m,[(0,e.eW)("filter"),(0,e.bF)(a)]),(0,e.eW)(" and applies the specified "),(0,e.Lk)("a",g,[(0,e.eW)("update"),(0,e.bF)(a)]),(0,e.eW)(" modifications.")]),(0,e.Lk)("p",null,[(0,e.eW)("--- from "),(0,e.Lk)("a",h,[(0,e.eW)("updates-a-single-document"),(0,e.bF)(a)])])]),q,(0,e.Lk)("p",null,[(0,e.Lk)("a",v,[(0,e.eW)("$inc — MongoDB Manual"),(0,e.bF)(a)])]),f,(0,e.Lk)("p",null,[(0,e.Lk)("a",_,[(0,e.eW)("Delete Documents — MongoDB Manual"),(0,e.bF)(a)])]),y],64)}]])},66262:(n,s)=>{s.A=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);