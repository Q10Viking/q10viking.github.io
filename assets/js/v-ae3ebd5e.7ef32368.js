"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[35754],{14414:(a,s,e)=>{e.r(s),e.d(s,{data:()=>n});const n={key:"v-ae3ebd5e",path:"/seata/02%20%E5%BE%AE%E6%9C%8D%E5%8A%A1seata%E9%85%8D%E7%BD%AE.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/seata/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"Linux",slug:"linux",children:[{level:3,title:"指定nacos作为配置中心和注册中心",slug:"指定nacos作为配置中心和注册中心",children:[]}]},{level:2,title:"配置参数同步到Nacos",slug:"配置参数同步到nacos",children:[]},{level:2,title:"配置参数同步到Nacos",slug:"配置参数同步到nacos-1",children:[]},{level:2,title:"启动Seata-Server",slug:"启动seata-server",children:[]},{level:2,title:"使用目前最新的版本依赖",slug:"使用目前最新的版本依赖",children:[]},{level:2,title:"项目代码",slug:"项目代码",children:[]}],filePathRelative:"seata/02 微服务seata配置.md"}},33561:(a,s,e)=>{e.r(s),e.d(s,{default:()=>r});const n=(0,e(20641).Fv)('<h2 id="linux" tabindex="-1"><a class="header-anchor" href="#linux" aria-hidden="true">#</a> Linux</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/seata\n\n<span class="token comment">#上传seata-server-1.4.0.tar.gz</span>\n<span class="token comment">#解压</span>\n<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> seata-server-1.4.0.tar.gz\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="指定nacos作为配置中心和注册中心" tabindex="-1"><a class="header-anchor" href="#指定nacos作为配置中心和注册中心" aria-hidden="true">#</a> <strong>指定nacos作为配置中心和注册中心</strong></h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/usr/seata/seata/conf/registry.conf\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="/images/seata/image-20220604175005250.png" alt="image-20220604175005250"></p><p><img src="/images/seata/image-20220604175313794.png" alt="image-20220604175313794"></p><h2 id="配置参数同步到nacos" tabindex="-1"><a class="header-anchor" href="#配置参数同步到nacos" aria-hidden="true">#</a> 配置参数同步到Nacos</h2><p>在seata-server的tar包中没有script文件夹，需要从源码包中将script这个文件夹上传到服务器。</p><p><img src="/images/seata/image-20220604175851317.png" alt="image-20220604175851317"></p><p>修改config.txt文件</p><p><img src="/images/seata/image-20220604193540095.png" alt="image-20220604193540095"></p><h2 id="配置参数同步到nacos-1" tabindex="-1"><a class="header-anchor" href="#配置参数同步到nacos-1" aria-hidden="true">#</a> 配置参数同步到Nacos</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/seata/seata/script/config-center/nacos\n<span class="token function">sh</span> nacos-config.sh <span class="token parameter variable">-h</span> localhost <span class="token parameter variable">-p</span> <span class="token number">8848</span> <span class="token parameter variable">-g</span> SEATA_GROUP <span class="token parameter variable">-t</span> b0748044-d986-470a-90d4-d463382fdc8b\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/images/seata/image-20220604181342524.png" alt="image-20220604181342524"></p><h2 id="启动seata-server" tabindex="-1"><a class="header-anchor" href="#启动seata-server" aria-hidden="true">#</a> 启动Seata-Server</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/seata/seata\nbin/seata-server.sh\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/images/seata/image-20220604193201733.png" alt="image-20220604193201733"></p><h2 id="使用目前最新的版本依赖" tabindex="-1"><a class="header-anchor" href="#使用目前最新的版本依赖" aria-hidden="true">#</a> 使用目前最新的版本依赖</h2><table><thead><tr><th>Spring Cloud Alibaba Version</th><th>Sentinel Version</th><th>Nacos Version</th><th>RocketMQ Version</th><th>Dubbo Version</th><th>Seata Version</th></tr></thead><tbody><tr><td>2021.0.1.0*</td><td>1.8.3</td><td>1.4.2</td><td>4.9.2</td><td>2.7.15</td><td>1.4.2</td></tr></tbody></table><table><thead><tr><th>Spring Cloud Alibaba Version</th><th>Spring Cloud Version</th><th>Spring Boot Version</th></tr></thead><tbody><tr><td>2021.0.1.0</td><td>Spring Cloud 2021.0.1</td><td>2.6.3</td></tr></tbody></table><h2 id="项目代码" tabindex="-1"><a class="header-anchor" href="#项目代码" aria-hidden="true">#</a> 项目代码</h2><p><code>D:\\learncode\\seata\\learnSeata\\MicroServices</code></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SeataAutoDataSourceProxyCreator : Auto proxy of [druidDataSource]\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 在openfegin时使用  --&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-loadbalancer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>jdbc:mysql://192.168.187.135:3306/seata_account?useUnicode=true&amp;characterEncoding=utf8&amp;allowMultiQueries=true&amp;useSSL=false&amp;serverTimezone=UTC\n\njdbc:mysql://192.168.187.135:3306/seata_account?\nuseUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>',25),t={},r=(0,e(66262).A)(t,[["render",function(a,s){return n}]])},66262:(a,s)=>{s.A=(a,s)=>{const e=a.__vccOpts||a;for(const[a,n]of s)e[a]=n;return e}}}]);