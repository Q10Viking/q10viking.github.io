"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[50424],{15829:(n,a,s)=>{s.r(a),s.d(a,{data:()=>e});const e={key:"v-413af366",path:"/skywalking/02%20%E5%AE%89%E8%A3%85skywalking.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/skywalking/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"SkyWalking 环境搭建部署",slug:"skywalking-环境搭建部署",children:[]},{level:2,title:"下载",slug:"下载",children:[]},{level:2,title:"安装",slug:"安装",children:[]},{level:2,title:"启动",slug:"启动",children:[{level:3,title:"ui",slug:"ui",children:[]}]},{level:2,title:"日志",slug:"日志",children:[]}],filePathRelative:"skywalking/02 安装skywalking.md"}},6741:(n,a,s)=>{s.r(a),s.d(a,{default:()=>c});var e=s(20641);const p=(0,e.Fv)('<h2 id="skywalking-环境搭建部署" tabindex="-1"><a class="header-anchor" href="#skywalking-环境搭建部署" aria-hidden="true">#</a> <strong>SkyWalking 环境搭建部署</strong></h2><p>​ <img src="/images/skywalking/52908" alt="0"></p><h2 id="下载" tabindex="-1"><a class="header-anchor" href="#下载" aria-hidden="true">#</a> 下载</h2>',3),t={href:"https://skywalking.apache.org/downloads/",target:"_blank",rel:"noopener noreferrer"},l=(0,e.Fv)('<p><img src="/images/skywalking/55045.png" alt="https://note.youdao.com/yws/public/resource/f46cb9250e146defacf3c707ba847246/xmlnote/327C9D3647CE4BB482CB8301C62499DD/55045"></p><ul><li><p>SkyWalking APM: v9.1.0</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> https://archive.apache.org/dist/skywalking/9.1.0/apache-skywalking-apm-9.1.0.tar.gz \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>Java Agent: v8.11.0</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> https://archive.apache.org/dist/skywalking/java-agent/8.11.0/apache-skywalking-java-agent-8.11.0.tgz    \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>​</p></li></ul><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/skywalking</span>\n<span class="token punctuation">[</span>root@localhost skywalking<span class="token punctuation">]</span><span class="token comment"># ls</span>\napache-skywalking-apm-9.1.0.tar.gz  apache-skywalking-java-agent-8.11.0.tgz\n<span class="token punctuation">[</span>root@localhost skywalking<span class="token punctuation">]</span><span class="token comment"># tar -zxvf apache-skywalking-apm-9.1.0.tar.gz</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="启动" tabindex="-1"><a class="header-anchor" href="#启动" aria-hidden="true">#</a> 启动</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/skywalking/apache-skywalking-apm-bin/bin</span>\n<span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># ls</span>\noapService.bat      oapServiceInit.sh     oapServiceNoInit.sh  startup.bat  webappService.bat\noapServiceInit.bat  oapServiceNoInit.bat  oapService.sh        startup.sh   webappService.sh\n<span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># ./startup.sh</span>\nSkyWalking OAP started successfully<span class="token operator">!</span>\nSkyWalking Web Application started successfully<span class="token operator">!</span>\n<span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment">#</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>启动成功:会启动两个服务，一个是skywalking-oap-server，一个是skywalking-web-ui</p></blockquote><p><img src="/images/win11/image-20230308201050809.png" alt="image-20230308201050809"></p><p>skywalking-oap-server服务启动后会暴露11800 和 12800 两个端口，分别为收集监控数据的端口11800和接受前端请求的端口12800，修改端口可以修改config/applicaiton.yml</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">2023</span>-03-08 <span class="token number">20</span>:10:48,840 - org.apache.skywalking.oap.server.library.server.http.HTTPServer - <span class="token number">83</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - Bind handler GraphQLQueryHandler into http server <span class="token number">0.0</span>.0.0:12800\n<span class="token number">2023</span>-03-08 <span class="token number">20</span>:10:48,850 - org.apache.skywalking.oap.server.library.module.BootstrapFlow - <span class="token number">43</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - start the provider none <span class="token keyword">in</span> telemetry module.\n<span class="token number">2023</span>-03-08 <span class="token number">20</span>:10:48,850 - org.apache.skywalking.oap.server.library.module.BootstrapFlow - <span class="token number">43</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - start the provider default <span class="token keyword">in</span> core module.\n<span class="token number">2023</span>-03-08 <span class="token number">20</span>:10:48,864 - org.apache.skywalking.oap.server.library.server.grpc.GRPCServer - <span class="token number">131</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - Bind handler RemoteServiceHandler into gRPC server <span class="token number">0.0</span>.0.0:11800\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/images/win11/image-20230308201444409.png" alt="image-20230308201444409"></p><h3 id="ui" tabindex="-1"><a class="header-anchor" href="#ui" aria-hidden="true">#</a> ui</h3><p>skywalking-web-ui服务会占用 8080 端口， 修改端口可以修改webapp/webapp.yml</p><p><img src="/images/win11/55058" alt="https://note.youdao.com/yws/public/resource/f46cb9250e146defacf3c707ba847246/xmlnote/182F5C0E3CE645FCA7BDDFDD4668F6E8/55058"></p><p>访问：http://192.168.135.130:18080/</p><p><img src="/images/skywalking/image-20230308202955354.png" alt="image-20230308202955354"></p><h2 id="日志" tabindex="-1"><a class="header-anchor" href="#日志" aria-hidden="true">#</a> 日志</h2><p>在sky-walking项目下的logs目录</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./webappService.sh: 第 <span class="token number">35</span> 行:exec: java: 未找到\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>从这个目录可以看到当前的linux没有安装java</p><p>成功启动后的日志：在新创建的文件<code>skywalking-oap-server.log</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">2023</span>-03-08 <span class="token number">20</span>:22:19,897 - com.linecorp.armeria.common.util.SystemInfo - <span class="token number">237</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - hostname: localhost.localdomain <span class="token punctuation">(</span>from /proc/sys/kernel/hostname<span class="token punctuation">)</span>\n<span class="token number">2023</span>-03-08 <span class="token number">20</span>:22:24,699 - com.linecorp.armeria.server.Server - <span class="token number">755</span> <span class="token punctuation">[</span>armeria-boss-http-*:12800<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - Serving HTTP at /0:0:0:0:0:0:0:0%0:12800 - http://127.0.0.1:12800/\n<span class="token number">2023</span>-03-08 <span class="token number">20</span>:22:24,701 - org.apache.skywalking.oap.server.core.storage.PersistenceTimer - <span class="token number">58</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - persistence timer start\n<span class="token number">2023</span>-03-08 <span class="token number">20</span>:22:24,712 - org.apache.skywalking.oap.server.core.cache.CacheUpdateTimer - <span class="token number">46</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - Cache updateServiceInventory timer start\n<span class="token number">2023</span>-03-08 <span class="token number">20</span>:22:27,368 - org.apache.skywalking.oap.server.starter.OAPServerBootstrap - <span class="token number">53</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - Version of OAP: <span class="token number">9.1</span>.0-f1f519c\n<span class="token number">2023</span>-03-08 <span class="token number">20</span>:27:24,717 - org.apache.skywalking.oap.server.core.storage.ttl.DataTTLKeeperTimer - <span class="token number">88</span> <span class="token punctuation">[</span>pool-6-thread-1<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - Beginning to remove expired metrics from the storage.\n<span class="token number">2023</span>-03-08 <span class="token number">20</span>:27:25,849 - org.apache.skywalking.oap.server.core.storage.ttl.DataTTLKeeperTimer - <span class="token number">91</span> <span class="token punctuation">[</span>pool-6-thread-1<span class="token punctuation">]</span> INFO  <span class="token punctuation">[</span><span class="token punctuation">]</span> - Beginning to inspect data boundaries.\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div>',22),o={},c=(0,s(66262).A)(o,[["render",function(n,a){const s=(0,e.g2)("OutboundLink");return(0,e.uX)(),(0,e.CE)(e.FK,null,[p,(0,e.Lk)("p",null,[(0,e.Lk)("a",t,[(0,e.eW)("Downloads | Apache SkyWalking"),(0,e.bF)(s)])]),l],64)}]])},66262:(n,a)=>{a.A=(n,a)=>{const s=n.__vccOpts||n;for(const[n,e]of a)s[n]=e;return s}}}]);