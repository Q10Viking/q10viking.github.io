"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[88027],{81815:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-d51e8d9c",path:"/MongoDB/03%20CRUD%20Advance.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/MongoDB/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"Query Operators",slug:"query-operators",children:[{level:3,title:"Comparison",slug:"comparison",children:[]},{level:3,title:"Logical",slug:"logical",children:[]},{level:3,title:"Expressive",slug:"expressive",children:[]},{level:3,title:"案例",slug:"案例",children:[]}]}],filePathRelative:"MongoDB/03 CRUD Advance.md"}},42911:(n,s,a)=>{a.r(s),a.d(s,{default:()=>g});var t=a(20641);const p=(0,t.Lk)("h2",{id:"query-operators",tabindex:"-1"},[(0,t.Lk)("a",{class:"header-anchor",href:"#query-operators","aria-hidden":"true"},"#"),(0,t.eW)(" Query Operators")],-1),o={href:"https://www.mongodb.com/docs/manual/reference/operator/query/",target:"_blank",rel:"noopener noreferrer"},e=(0,t.Lk)("h3",{id:"comparison",tabindex:"-1"},[(0,t.Lk)("a",{class:"header-anchor",href:"#comparison","aria-hidden":"true"},"#"),(0,t.eW)(" Comparison")],-1),c={href:"https://www.mongodb.com/docs/manual/reference/operator/query/#comparison",target:"_blank",rel:"noopener noreferrer"},r=(0,t.Fv)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>trips<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;tripduration&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;$lte&quot;</span> <span class="token operator">:</span> <span class="token number">70</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token string-property property">&quot;usertype&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;$ne&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Subscriber&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="logical" tabindex="-1"><a class="header-anchor" href="#logical" aria-hidden="true">#</a> Logical</h3><p>用中括号来包裹条件</p>',3),u={href:"https://www.mongodb.com/docs/manual/reference/operator/query-logical/",target:"_blank",rel:"noopener noreferrer"},l=(0,t.Fv)('<p><img src="/images/MongoDB/image-20221014114747470.png" alt="image-20221014114747470"></p><blockquote><p>Which is <strong>the most succinct</strong> query to return all documents from the <code>sample_training.inspections</code> collection where the inspection date is either <code>&quot;Feb 20 2015&quot;</code>, or <code>&quot;Feb 21 2015&quot;</code> and the company is <strong>not</strong> part of the <code>&quot;Cigarette Retail Dealer - 127&quot;</code> sector?</p></blockquote><details class="custom-container details"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// $and隐式</span>\ndb<span class="token punctuation">.</span>inspections<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>\n  <span class="token punctuation">{</span> <span class="token string-property property">&quot;$or&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Feb 20 2015&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n             <span class="token punctuation">{</span> <span class="token string-property property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Feb 21 2015&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token string-property property">&quot;sector&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;$ne&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Cigarette Retail Dealer - 127&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><h4 id="nor的理解" tabindex="-1"><a class="header-anchor" href="#nor的理解" aria-hidden="true">#</a> $nor的理解</h4>',4),i={href:"https://www.mongodb.com/docs/manual/reference/operator/query/nor/",target:"_blank",rel:"noopener noreferrer"},k=(0,t.Fv)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>zips<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;pop&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;$gte&quot;</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;$lte&quot;</span><span class="token operator">:</span> <span class="token number">1000000</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token comment">// 等价</span>\ndb<span class="token punctuation">.</span>zips<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;$nor&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;pop&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;$lt&quot;</span><span class="token operator">:</span><span class="token number">5000</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n             <span class="token punctuation">{</span> <span class="token string-property property">&quot;pop&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;$gt&quot;</span><span class="token operator">:</span> <span class="token number">1000000</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>pop字段不能小于5000 并且（AND）</li><li>pop字段不能大于1000000</li></ul><h3 id="expressive" tabindex="-1"><a class="header-anchor" href="#expressive" aria-hidden="true">#</a> Expressive</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Allows for more complex queries and for <strong>comparing fields whith a document</strong></p></div><ul><li>$ can be use to access the field value</li></ul><blockquote><p>下面的例子注意$gt,$eq后面是数组</p></blockquote><p><img src="/images/MongoDB/image-20221014145213960.png" alt="image-20221014145213960"></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>companies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;$expr&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;$eq&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;$permalink&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;$twitter_username&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>\n                  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="案例" tabindex="-1"><a class="header-anchor" href="#案例" aria-hidden="true">#</a> 案例</h3><blockquote><p>How many companies in the <code>sample_training.companies</code> dataset were</p><p>either founded in <code>2004</code></p><blockquote><ul><li>[and] either have the <em>social</em> <code>category_code</code> [or] <em>web</em> <code>category_code</code>,</li></ul></blockquote><p>[or] were founded in the month of <code>October</code></p><blockquote><ul><li>[and] also either have the <em>social</em> <code>category_code</code> [or] <em>web</em> <code>category_code</code>?</li></ul></blockquote></blockquote><p>我的写法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> db<span class="token punctuation">.</span>companies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;$or&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> \n     \t\t\t\t\t<span class="token punctuation">{</span> <span class="token string-property property">&quot;founded_year&quot;</span><span class="token operator">:</span> <span class="token number">2004</span><span class="token punctuation">,</span> \n                         \t<span class="token string-property property">&quot;$or&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;category_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;web&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;category_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;social&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> \n                          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n     \t\t\t\t\t<span class="token punctuation">{</span> <span class="token string-property property">&quot;founded_month&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> \n                         \t<span class="token string-property property">&quot;$or&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;category_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;web&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;category_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;social&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> \n                          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>更加简洁的写法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>companies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;$and&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n                        <span class="token punctuation">{</span> <span class="token string-property property">&quot;$or&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;founded_year&quot;</span><span class="token operator">:</span> <span class="token number">2004</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                                   <span class="token punctuation">{</span> <span class="token string-property property">&quot;founded_month&quot;</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                        <span class="token punctuation">{</span> <span class="token string-property property">&quot;$or&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;category_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;web&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                                   <span class="token punctuation">{</span> <span class="token string-property property">&quot;category_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;social&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>',14),d={},g=(0,a(66262).A)(d,[["render",function(n,s){const a=(0,t.g2)("OutboundLink");return(0,t.uX)(),(0,t.CE)(t.FK,null,[p,(0,t.Lk)("p",null,[(0,t.Lk)("a",o,[(0,t.eW)("Query and Projection Operators — MongoDB Manual"),(0,t.bF)(a)])]),e,(0,t.Lk)("p",null,[(0,t.Lk)("a",c,[(0,t.eW)("Query and Projection Operators — MongoDB Manual"),(0,t.bF)(a)])]),r,(0,t.Lk)("p",null,[(0,t.Lk)("a",u,[(0,t.eW)("Logical Query Operators — MongoDB Manual"),(0,t.bF)(a)])]),l,(0,t.Lk)("p",null,[(0,t.Lk)("a",i,[(0,t.eW)("$nor — MongoDB Manual"),(0,t.bF)(a)])]),k],64)}]])},66262:(n,s)=>{s.A=(n,s)=>{const a=n.__vccOpts||n;for(const[n,t]of s)a[n]=t;return a}}}]);