"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[35626],{15788:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-387553ed",path:"/zk/17%20zk%E5%9B%9B%E5%AD%97%E5%91%BD%E4%BB%A4.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To 目录",link:"/zk/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[],filePathRelative:"zk/17 zk四字命令.md"}},65155:(n,s,a)=>{a.r(s),a.d(s,{default:()=>c});var t=a(20641);const e=(0,t.Fv)('<blockquote><p>zookeeper 支持某些特定的四字命令与其交互，用户获取 zookeeper 服务的当前状态及相关信息，用户在客户端可以通过 telenet 或者 nc（netcat） 向 zookeeper 提交相应的命令。</p></blockquote><p>安装 nc 命令：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># centos</span>\nyum <span class="token function">install</span> <span class="token function">nc</span>  \n<span class="token comment"># ubuntu</span>\n<span class="token function">sudo</span> <span class="token function">apt-get</span> update <span class="token parameter variable">-y</span>\n<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> netcat\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>四字命令格式：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  <span class="token builtin class-name">echo</span> <span class="token punctuation">[</span>command<span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token function">nc</span> <span class="token punctuation">[</span>ip<span class="token punctuation">]</span> <span class="token punctuation">[</span>port<span class="token punctuation">]</span>              \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ZooKeeper 常用四字命令主要如下：</p>',6),p={href:"https://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_4lw",target:"_blank",rel:"noopener noreferrer"},o=(0,t.Fv)('<table><thead><tr><th>四字命令</th><th>功能描述</th></tr></thead><tbody><tr><td>conf</td><td>3.3.0版本引入的。打印出服务相关配置的详细信息。</td></tr><tr><td>cons</td><td>3.3.0版本引入的。列出所有连接到这台服务器的客户端全部连接/会话详细信息。包括&quot;接受/发送&quot;的包数量、会话id、操作延迟、最后的操作执行等等信息。</td></tr><tr><td>crst</td><td>3.3.0版本引入的。重置所有连接的连接和会话统计信息。</td></tr><tr><td>dump</td><td>列出那些比较重要的会话和临时节点。这个命令只能在leader节点上有用。</td></tr><tr><td>envi</td><td>打印出服务环境的详细信息。</td></tr><tr><td>reqs</td><td>列出未经处理的请求</td></tr><tr><td>ruok</td><td>测试服务是否处于正确状态。如果确实如此，那么服务返回&quot;imok&quot;，否则不做任何相应。</td></tr><tr><td>stat</td><td>输出关于性能和连接的客户端的列表。</td></tr><tr><td>srst</td><td>重置服务器的统计。</td></tr><tr><td>srvr</td><td>3.3.0版本引入的。列出连接服务器的详细信息</td></tr><tr><td>wchs</td><td>3.3.0版本引入的。列出服务器watch的详细信息。</td></tr><tr><td>wchc</td><td>3.3.0版本引入的。通过session列出服务器watch的详细信息，它的输出是一个与watch相关的会话的列表。</td></tr><tr><td>wchp</td><td>3.3.0版本引入的。通过路径列出服务器watch的详细信息。它输出一个与session相关的路径。</td></tr><tr><td>mntr</td><td>3.4.0版本引入的。输出可用于检测集群健康状态的变量列表</td></tr></tbody></table><p><strong>开启四字命令</strong></p><p>方法1： 在zoo.cfg 文件里加入配置项让这些指令放行</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#开启四字命令</span>\n<span class="token assign-left variable">4lw.commands.whitelist</span><span class="token operator">=</span>*\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>stat 命令</strong></p><blockquote><p>可以用来查看zk的版本</p></blockquote><p>stat 命令用于查看 zk 的状态信息，实例如下：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>q10viking@LAPTOP-PJLAUUSP:/$ <span class="token builtin class-name">echo</span> <span class="token function">stat</span> <span class="token operator">|</span> <span class="token function">nc</span> localhost <span class="token number">2181</span>\nZookeeper version: <span class="token number">3.7</span>.1-a2fb57c55f8e59cdd76c34b357ad5181df1258d5, built on <span class="token number">2022</span>-05-07 06:45 UTC\nClients:\n /127.0.0.1:38502<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span>queued<span class="token operator">=</span><span class="token number">0</span>,recved<span class="token operator">=</span><span class="token number">1</span>,sent<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>\n\nLatency min/avg/max: <span class="token number">0</span>/0.0/0\nReceived: <span class="token number">1</span>\nSent: <span class="token number">0</span>\nConnections: <span class="token number">1</span>\nOutstanding: <span class="token number">0</span>\nZxid: 0xdb8d\nMode: standalone\nNode count: <span class="token number">184</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>',8),r={},c=(0,a(66262).A)(r,[["render",function(n,s){const a=(0,t.g2)("OutboundLink");return(0,t.uX)(),(0,t.CE)(t.FK,null,[e,(0,t.Lk)("p",null,[(0,t.Lk)("a",p,[(0,t.eW)("ZooKeeper: Because Coordinating Distributed Systems is a Zoo (apache.org)"),(0,t.bF)(a)])]),o],64)}]])},66262:(n,s)=>{s.A=(n,s)=>{const a=n.__vccOpts||n;for(const[n,t]of s)a[n]=t;return a}}}]);